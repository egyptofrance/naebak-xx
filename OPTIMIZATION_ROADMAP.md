# ุฎุทุฉ ุงูุชุทููุฑ ูุงูุชุญุณูู ุงููุชุฏุฑุฌุฉ ููุดุฑูุน naebak-xx

**ุชุงุฑูุฎ ุงูุจุฏุก:** 30 ุฃูุชูุจุฑ 2025  
**ุงููุฏู:** ุชุญุณูู ุงูุฃุฏุงุก ูุงูุฌูุฏุฉ ูุน ุงูุญูุงุธ ุนูู ุงุณุชูุฑุงุฑ ุงููุดุฑูุน

## ุงุณุชุฑุงุชูุฌูุฉ Branching ุงูุขููุฉ

```
main (ุงููุณุฎุฉ ุงูุญุงููุฉ ุงูุดุบุงูุฉ - ูุญููุฉ)
  โ
  โโโ development/optimization-phase1 (ุงููุฑุญูุฉ 1)
  โ     โโโ test โ merge to staging
  โ     โโโ rollback if needed
  โ
  โโโ development/optimization-phase2 (ุงููุฑุญูุฉ 2)
  โ     โโโ test โ merge to staging
  โ     โโโ rollback if needed
  โ
  โโโ ... (ุงููุฑุงุญู ุงูุชุงููุฉ)
```

## ููุงุนุฏ ุงูุนูู ุงูุขูู

1. โ **ูุง ููุณ branch main ุฃุจุฏุงู** - ูู ุงููุณุฎุฉ ุงูุดุบุงูุฉ
2. โ **ูู ูุฑุญูุฉ ูู branch ูููุตู** - ุณูููุฉ ุงูุฑุฌูุน
3. โ **ุงุฎุชุจุงุฑ ูุงูู ูุจู ุงูุฏูุฌ** - ุชุฃูุฏ ูู ุนุฏู ูุณุฑ ุงููุดุฑูุน
4. โ **commit ุจุนุฏ ูู ุชุบููุฑ ุตุบูุฑ** - ุณูููุฉ ุชุชุจุน ุงููุดุงูู
5. โ **backup ูุจู ูู ูุฑุญูุฉ** - ุฃูุงู ุฅุถุงูู

## ุงููุฑุงุญู ุงูุชุทููุฑูุฉ (ูุฑุชุจุฉ ุญุณุจ ุงูุฃููููุฉ ูุงูุฃูุงู)

---

### ๐ข ุงููุฑุญูุฉ 1: ุชูุธูู ุงูุชุจุนูุงุช (ุฃูู ุฎุทูุฑุฉ - ุฃุนูู ูุงุฆุฏุฉ)
**Branch:** `development/optimization-phase1`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 2-3 ุณุงุนุงุช  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถ ุฌุฏุงู

#### ุงูุฎุทูุงุช:
1. **ุฅุฒุงูุฉ ุงูุญุฒู ุบูุฑ ุงููุณุชุฎุฏูุฉ (85 ุญุฒูุฉ)**
   ```bash
   # ุญุฐู ุงูุญุฒู ุงููุงุถุญุฉ ุฃููุง ุบูุฑ ูุณุชุฎุฏูุฉ
   pnpm remove @headlessui/react @headlessui/tailwindcss @tremor/react
   pnpm remove openai-edge lodash.uniqby checkbox
   pnpm remove react-confetti react-confetti-explosion
   pnpm remove html2canvas jspdf react-copy-to-clipboard
   # ... (ุงููุงุฆูุฉ ุงููุงููุฉ ูู ุงูููู ุงููุฑูู)
   ```

2. **ููู ุชุจุนูุงุช ุงูุชุทููุฑ ุฅูู devDependencies**
   ```bash
   pnpm remove @faker-js/faker @testing-library/react
   pnpm add -D @faker-js/faker @testing-library/react
   ```

3. **ุงูุงุฎุชุจุงุฑ:**
   - ุชุดุบูู `pnpm install`
   - ุชุดุบูู `pnpm dev`
   - ูุชุญ ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ูุงูุชุฃูุฏ ูู ุนูููุง
   - ูุญุต console ููุฃุฎุทุงุก

4. **Commit:**
   ```bash
   git add package.json pnpm-lock.yaml
   git commit -m "chore: remove 85 unused dependencies"
   ```

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
- โ ุชูููุฑ 50-100MB ูู node_modules
- โ ุชุณุฑูุน `pnpm install` ุจูุณุจุฉ 30-40%
- โ ูุง ุชุฃุซูุฑ ุนูู ุงูููุฏ ุงููุนูู

**ุฎุทุฉ ุงูุฑุฌูุน (Rollback):**
```bash
git checkout main
git branch -D development/optimization-phase1
```

---

### ๐ข ุงููุฑุญูุฉ 2: ุชูุธูู ุงููููุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ (ุฃูุงู ุนุงูู)
**Branch:** `development/optimization-phase2`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 1-2 ุณุงุนุฉ  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถ

#### ุงูุฎุทูุงุช:
1. **ุฅูุดุงุก ูุฌูุฏ archive ูููููุงุช ุงููุฏููุฉ**
   ```bash
   mkdir -p archive/old-docs
   mkdir -p archive/old-sql
   ```

2. **ููู ูููุงุช ุงูุชูุซูู ุงููุฏููุฉ**
   ```bash
   # ููู ูููุงุช .md ุงููุฏููุฉ (ูุง ุนุฏุง README.md)
   mv ADMIN_FIXES_SUMMARY.md archive/old-docs/
   mv COMPLETE_FIX_SUMMARY.md archive/old-docs/
   # ... (ุงููููุงุช ุงูุฃุฎุฑู)
   ```

3. **ููู ูููุงุช SQL ุงููุฏููุฉ**
   ```bash
   # ูุฑุงุฌุนุฉ ูุฃุฑุดูุฉ ูููุงุช SQL ุงููุทุจูุฉ
   mv *.sql archive/old-sql/ # (ุจุนุฏ ุงููุฑุงุฌุนุฉ)
   ```

4. **ููู ููู JSON ุงููุจูุฑ**
   ```bash
   mkdir -p data/backups
   mv ูุงุนุฏุฉ_ุงูุจูุงูุงุช_ูุงููุฉ.json data/backups/
   echo "data/backups/*.json" >> .gitignore
   ```

5. **ุงูุงุฎุชุจุงุฑ:**
   - ุงูุชุฃูุฏ ูู ุฃู ุงููุดุฑูุน ูุนูู
   - ูุฑุงุฌุนุฉ ุฃู ูุง ุดูุก ูุณุชุฎุฏู ุงููููุงุช ุงููููููุฉ

6. **Commit:**
   ```bash
   git add .
   git commit -m "chore: organize old documentation and SQL files"
   ```

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
- โ ูุดุฑูุน ุฃูุธู ูุฃุณูู ูู ุงูุชููู
- โ ุชูููู ุงูููุถู ูู ุงูุฌุฐุฑ
- โ ุงููููุงุช ูุญููุธุฉ ูู archive ููุฑุฌูุน ุฅูููุง

---

### ๐ก ุงููุฑุญูุฉ 3: ุฅุฒุงูุฉ console.log (ุฃูุงู ูุชูุณุท)
**Branch:** `development/optimization-phase3`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 2-3 ุณุงุนุงุช  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุท

#### ุงูุฎุทูุงุช:
1. **ุฅูุดุงุก logger utility**
   ```typescript
   // src/utils/logger.ts
   export const logger = {
     log: (...args: any[]) => {
       if (process.env.NODE_ENV === 'development') {
         console.log(...args);
       }
     },
     error: (...args: any[]) => console.error(...args),
     warn: (...args: any[]) => console.warn(...args),
   };
   ```

2. **ุงุณุชุจุฏุงู console.log ุชุฏุฑูุฌูุงู**
   ```bash
   # ุงูุจุญุซ ุนู ุฌููุน console.log
   grep -r "console.log" src/ --include="*.tsx" --include="*.ts"
   
   # ุงุณุชุจุฏุงู ูู ุงููููุงุช ุบูุฑ ุงูุญุฑุฌุฉ ุฃููุงู
   # ุซู ุงููููุงุช ุงูุญุฑุฌุฉ ูุน ุงุฎุชุจุงุฑ
   ```

3. **ุงูุงุฎุชุจุงุฑ ุจุนุฏ ูู ููู:**
   - ุชุดุบูู ุงููุดุฑูุน
   - ุงุฎุชุจุงุฑ ุงููุธููุฉ ุงููุชุนููุฉ ุจุงูููู
   - commit ุจุนุฏ ูู ูุฌููุนุฉ ูููุงุช

4. **Commit:**
   ```bash
   git add .
   git commit -m "refactor: replace console.log with logger utility"
   ```

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
- โ ูุง console.log ูู ุงูุฅูุชุงุฌ
- โ ุชุญุณูู ุงูุฃูุงู
- โ ุฃุฏุงุก ุฃูุถู ููููุงู

---

### ๐ก ุงููุฑุญูุฉ 4: ุชูุญูุฏ ุฏูุงู className (ุฃูุงู ุนุงูู)
**Branch:** `development/optimization-phase4`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 1 ุณุงุนุฉ  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ก ููุฎูุถ-ูุชูุณุท

#### ุงูุฎุทูุงุช:
1. **ุญุฐู ุฏุงูุฉ classNames ุงูููุฑุฑุฉ**
   ```bash
   # ุงุณุชุจุฏุงู ุฌููุน ุงุณุชูุฑุงุฏุงุช classNames ุจู cn
   find src -type f \( -name "*.tsx" -o -name "*.ts" \) -exec sed -i 's/import.*classNames.*from.*classNames/import { cn } from "@\/utils\/cn"/g' {} +
   find src -type f \( -name "*.tsx" -o -name "*.ts" \) -exec sed -i 's/classNames(/cn(/g' {} +
   
   # ุญุฐู ุงูููู
   rm src/utils/classNames.ts
   ```

2. **ุงูุงุฎุชุจุงุฑ:**
   - ุชุดุบูู ุงููุดุฑูุน
   - ูุญุต ุงูุตูุญุงุช ููุชุฃูุฏ ูู ุงูู styling ุตุญูุญ

3. **Commit:**
   ```bash
   git add .
   git commit -m "refactor: unify className utilities to use cn only"
   ```

---

### ๐ ุงููุฑุญูุฉ 5: ุชุญุณูู ุงูุตูุฑ (ุฃูุงู ูุชูุณุท)
**Branch:** `development/optimization-phase5`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 2-3 ุณุงุนุงุช  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ ูุชูุณุท

#### ุงูุฎุทูุงุช:
1. **ุงุณุชุจุฏุงู <img> ุจู <Image>**
   ```typescript
   // ูุจู
   <img src="/logo.png" alt="Logo" />
   
   // ุจุนุฏ
   import Image from 'next/image';
   <Image src="/logo.png" alt="Logo" width={100} height={100} />
   ```

2. **ุงูุงุฎุชุจุงุฑ ุจุนุฏ ูู ููู:**
   - ุงูุชุฃูุฏ ูู ุธููุฑ ุงูุตูุฑ ุจุดูู ุตุญูุญ
   - ูุญุต ุงูุฃุฏุงุก ูู DevTools

3. **Commit:**
   ```bash
   git add .
   git commit -m "perf: replace img tags with Next.js Image component"
   ```

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
- โ ุชุญุณูู ุฃุฏุงุก ุชุญููู ุงูุตูุฑ
- โ Lazy loading ุชููุงุฆู
- โ ุชุญููู ุชููุงุฆู ูู WebP

---

### ๐ด ุงููุฑุญูุฉ 6: ุชุทุจูู Lazy Loading ููููุชุจุงุช ุงูุซูููุฉ (ุญุฑุฌุฉ)
**Branch:** `development/optimization-phase6`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 4-6 ุณุงุนุงุช  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ด ุนุงูู

#### ุงูุฎุทูุงุช:
1. **ุชุทุจูู dynamic import ูู recharts**
   ```typescript
   // ูุจู
   import { BarChart } from 'recharts';
   
   // ุจุนุฏ
   import dynamic from 'next/dynamic';
   const BarChart = dynamic(() => import('recharts').then(mod => mod.BarChart), {
     ssr: false,
     loading: () => <div>Loading chart...</div>
   });
   ```

2. **ุชุทุจูู dynamic import ูู TipTap**
   ```typescript
   const TipTapEditor = dynamic(() => import('@/components/TipTap'), {
     ssr: false,
     loading: () => <div>Loading editor...</div>
   });
   ```

3. **ุงูุงุฎุชุจุงุฑ ุงูููุซู:**
   - ุงุฎุชุจุงุฑ ูู ุตูุญุฉ ุชุณุชุฎุฏู ุงูููููุงุช ุงููุนุฏูุฉ
   - ูุญุต ุงูุฃุฏุงุก ูู DevTools (Network tab)
   - ุงูุชุฃูุฏ ูู ุนุฏู ูุณุฑ ุงููุธุงุฆู

4. **Commit ุจุนุฏ ูู ููุชุจุฉ:**
   ```bash
   git add .
   git commit -m "perf: add lazy loading for recharts components"
   ```

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
- โ ุชูููู First Load JS ุจูุณุจุฉ 40-50%
- โ ุชุญุณูู Time to Interactive
- โ๏ธ **ุฎุทูุฑุฉ:** ูุฏ ููุณุฑ ุจุนุถ ุงููุธุงุฆู ุฅุฐุง ูู ูุชู ุจุญุฐุฑ

---

### ๐ด ุงููุฑุญูุฉ 7: ุชุญุณูู revalidatePath (ุญุฑุฌุฉ ุฌุฏุงู)
**Branch:** `development/optimization-phase7`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 6-8 ุณุงุนุงุช  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ด ุนุงูู ุฌุฏุงู

#### ุงูุฎุทูุงุช:
1. **ุฅูุดุงุก revalidation helper**
   ```typescript
   // src/utils/revalidation.ts
   export const revalidateComplaintsPages = () => {
     revalidateTag('complaints');
   };
   ```

2. **ุฅุถุงูุฉ tags ูู data fetching**
   ```typescript
   // ูุจู
   const data = await fetch('/api/complaints');
   
   // ุจุนุฏ
   const data = await fetch('/api/complaints', {
     next: { tags: ['complaints'] }
   });
   ```

3. **ุงุณุชุจุฏุงู revalidatePath ุจู revalidateTag**
   ```typescript
   // ูุจู
   revalidatePath("/complaints");
   revalidatePath("/app_admin/complaints");
   revalidatePath("/manager-complaints");
   
   // ุจุนุฏ
   revalidateTag('complaints');
   ```

4. **ุงูุงุฎุชุจุงุฑ ุงูููุซู ุฌุฏุงู:**
   - ุงุฎุชุจุงุฑ ูู CRUD operation
   - ุงูุชุฃูุฏ ูู ุชุญุฏูุซ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ
   - ูุญุต Cache behavior

**ุงููุฎุฑุฌุงุช ุงููุชููุนุฉ:**
- โ ุชุญุณูู ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ ุจูุณุจุฉ 30-40%
- โ ุชูููู ุงูุญูู ุนูู ุงูุฎุงุฏู
- โ๏ธ **ุฎุทูุฑุฉ ุนุงููุฉ:** ูุฏ ูุณุจุจ ูุดุงูู ูู ุชุญุฏูุซ ุงูุจูุงูุงุช

---

### ๐ด ุงููุฑุญูุฉ 8: ุฅุนุงุฏุฉ ููููุฉ ุงูููููุงุช ุงูููุฑุฑุฉ (ุทูููุฉ ูุญุฑุฌุฉ)
**Branch:** `development/optimization-phase8`  
**ุงููุฏุฉ ุงููุชููุนุฉ:** 2-3 ุฃุณุงุจูุน  
**ูุณุชูู ุงูุฎุทูุฑุฉ:** ๐ด ุนุงูู ุฌุฏุงู

#### ุงูุฎุทูุงุช:
1. **ุฅูุดุงุก GenericDialog**
2. **ุฅูุดุงุก GenericForm**
3. **ุฅูุดุงุก GenericDataTable**
4. **ุงุณุชุจุฏุงู ุงูููููุงุช ุงููุฏููุฉ ุชุฏุฑูุฌูุงู**
5. **ุงุฎุชุจุงุฑ ููุซู ุจุนุฏ ูู ุงุณุชุจุฏุงู**

**ููุงุญุธุฉ:** ูุฐู ุงููุฑุญูุฉ ุชุญุชุงุฌ ุชุฎุทูุท ูููุตู ูููุตู

---

## ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ููู ูุฑุญูุฉ

### โ Checklist ูุจู ุงูุฏูุฌ:
- [ ] `pnpm install` ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] `pnpm dev` ูุดุชุบู ุจุฏูู ูุดุงูู
- [ ] ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชูุชุญ ุจุดูู ุตุญูุญ
- [ ] ุตูุญุงุช ุงูููุงุจ ุชุนูู
- [ ] ุตูุญุงุช ุงูุดูุงูู ุชุนูู
- [ ] ุตูุญุงุช ุงูุฅุฏุงุฑุฉ ุชุนูู
- [ ] ูุง ุฃุฎุทุงุก ูู Console
- [ ] ูุง ุฃุฎุทุงุก ูู Network tab
- [ ] ุงูุฃุฏุงุก ูุญุณูู ุฃู ุนูู ุงูุฃูู ููุณู

### ๐ ุฎุทุฉ Rollback ุงูุณุฑูุนุฉ:
```bash
# ุฅุฐุง ุญุตูุช ูุดููุฉ ูู ุฃู ูุฑุญูุฉ:
git checkout main
git branch -D development/optimization-phaseX

# ุฃู ุงูุฑุฌูุน ูุขุฎุฑ commit ุดุบุงู:
git reset --hard HEAD~1

# ุฃู ุงูุฑุฌูุน ูู commit ูุนูู:
git reset --hard <commit-hash>
```

---

## ุงูุฌุฏูู ุงูุฒููู ุงูููุชุฑุญ

| ุงููุฑุญูุฉ | ุงููุฏุฉ | ุงูุจุฏุก | ุงูุงูุชูุงุก ุงููุชููุน |
|:---|:---:|:---:|:---:|
| ุงููุฑุญูุฉ 1 (ุงูุชุจุนูุงุช) | 2-3 ุณุงุนุงุช | ุงูููู | ุงูููู |
| ุงููุฑุญูุฉ 2 (ุงููููุงุช) | 1-2 ุณุงุนุฉ | ุงูููู | ุงูููู |
| ุงููุฑุญูุฉ 3 (console.log) | 2-3 ุณุงุนุงุช | ุบุฏุงู | ุบุฏุงู |
| ุงููุฑุญูุฉ 4 (className) | 1 ุณุงุนุฉ | ุบุฏุงู | ุบุฏุงู |
| ุงููุฑุญูุฉ 5 (ุงูุตูุฑ) | 2-3 ุณุงุนุงุช | ุจุนุฏ ุบุฏ | ุจุนุฏ ุบุฏ |
| ุงููุฑุญูุฉ 6 (Lazy Loading) | 4-6 ุณุงุนุงุช | ุจุนุฏ 3 ุฃูุงู | ุจุนุฏ 4 ุฃูุงู |
| ุงููุฑุญูุฉ 7 (revalidation) | 6-8 ุณุงุนุงุช | ุจุนุฏ ุฃุณุจูุน | ุจุนุฏ ุฃุณุจูุน ููุตู |
| ุงููุฑุญูุฉ 8 (ุฅุนุงุฏุฉ ุงูููููุฉ) | 2-3 ุฃุณุงุจูุน | ุจุนุฏ ุฃุณุจูุนูู | ุจุนุฏ ุดูุฑ |

---

## ุงููุฎุฑุฌุงุช ุงูููุงุฆูุฉ ุงููุชููุนุฉ

ุจุนุฏ ุฅุชูุงู ุฌููุน ุงููุฑุงุญู:
- โ **ุชูููู ุญุฌู node_modules:** 50-100MB ุฃูู
- โ **ุชุญุณูู First Load JS:** 40-50% ุฃุณุฑุน
- โ **ุชุญุณูู Time to Interactive:** 35% ุฃุณุฑุน
- โ **ุชูููู ุงูููุฏ:** 30-40% ุฃูู ุชูุฑุงุฑ
- โ **ุชุญุณูู ุงูุตูุงูุฉ:** 70% ุฃุณูู ูู ุงูุชุญุฏูุซ
- โ **ุชุญุณูู ุงูุฃูุงู:** ุฅุฒุงูุฉ console.log ูุงูุจูุงูุงุช ุงูุญุณุงุณุฉ

---

## ููุงุญุธุงุช ูููุฉ

1. **ูุง ุชุณุชุนุฌู:** ูู ูุฑุญูุฉ ุชุญุชุงุฌ ุงุฎุชุจุงุฑ ูุงูู
2. **commit ูุซูุฑ ุฃูุถู ูู commit ูููู:** ุณูููุฉ ุงูุฑุฌูุน
3. **ุงุฎุชุจุฑ ุนูู environment ูููุตู ุฃููุงู:** ูุจู ุงูุฅูุชุงุฌ
4. **ุงุญุชูุธ ุจู backup ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:** ูุจู ูู ูุฑุญูุฉ ุญุฑุฌุฉ
5. **ุงุณุชุฎุฏู Vercel Preview Deployments:** ูุงุฎุชุจุงุฑ ูู branch

---

## ุงูุฎุทูุฉ ุงูุชุงููุฉ

**ูู ุชุฑูุฏ ุงูุจุฏุก ูู ุงููุฑุญูุฉ 1 (ุชูุธูู ุงูุชุจุนูุงุช) ุงูุขูุ**

ูุฐู ุงููุฑุญูุฉ ุขููุฉ ุฌุฏุงู ูููุง ุชุฃุซูุฑ ูุจูุฑ ููุฑู.
