# ุชูุฑูุฑ ุชุญุฏูุซ ูุธุงู ุงููุธุงุฆู

**ุงูุชุงุฑูุฎ**: 2 ููููุจุฑ 2025  
**Commit**: `271cf62`  
**ุงููุฏู**: ุชุญููู ูุธุงู ุงููุธุงุฆู ููุณุชุฎุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุชุตูููุงุช ูุงููุญุงูุธุงุช ุจุฏูุงู ูู ุงูููู ุงูุซุงุจุชุฉ

---

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุชุญุฏูุซ ูุธุงู ุงููุธุงุฆู ุจุงููุงูู ููููู **ุฏููุงููููุงู** ู**ูุงุจูุงู ููุฅุฏุงุฑุฉ** ูู ููุญุฉ ุงูุชุญููุ ูุน ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ.

---

## ๐ฏ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### ูุจู ุงูุชุญุฏูุซ โ

1. **ุงูุชุตูููุงุช ุจุงูุฅูุฌููุฒูุฉ**: data-entry, management, etc.
2. **ุงูุชุตูููุงุช ุซุงุจุชุฉ ูู ุงูููุฏ**: ูุง ูููู ุชุนุฏูููุง ุฅูุง ุจุชุนุฏูู ุงูููุฏ
3. **ุงููุญุงูุธุงุช ููุฑุฑุฉ**: ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ุงูููุฏ
4. **ูุง ุชูุฌุฏ ุตูุญุฉ ุฅุฏุงุฑูุฉ**: ููุชุญูู ูู ุงูุชุตูููุงุช

### ุจุนุฏ ุงูุชุญุฏูุซ โ

1. **ุงูุชุตูููุงุช ุจุงูุนุฑุจูุฉ**: ุฅุฏุฎุงู ุจูุงูุงุชุ ุฅุฏุงุฑุฉุ ุณูุฑุชุงุฑูุฉุ ุฅูุฎ
2. **ุงูุชุตูููุงุช ุฏููุงููููุฉ**: ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุงุณุชุฎุฏุงู ุฌุฏูู ุงููุญุงูุธุงุช**: ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ
4. **ุตูุญุฉ ุฅุฏุงุฑูุฉ ูุงููุฉ**: ูุฅุฏุงุฑุฉ ุงูุชุตูููุงุช

---

## ๐๏ธ ุงูุชุนุฏููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 1. ุฌุฏูู `job_categories` (ุฌุฏูุฏ)

```sql
CREATE TABLE public.job_categories (
  id UUID PRIMARY KEY,
  name_ar TEXT NOT NULL UNIQUE,      -- ุงูุงุณู ุจุงูุนุฑุจูุฉ
  name_en TEXT,                       -- ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ
  slug TEXT NOT NULL UNIQUE,          -- ูุนุฑู ูุฑูุฏ
  description TEXT,                   -- ุงููุตู
  icon TEXT,                          -- ุฃููููุฉ
  is_active BOOLEAN DEFAULT true,     -- ูุดุทุ
  display_order INTEGER DEFAULT 0,    -- ุชุฑุชูุจ ุงูุนุฑุถ
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

### 2. ุงูุชุตูููุงุช ุงูุงูุชุฑุงุถูุฉ

ุชู ุฅุถุงูุฉ 8 ุชุตูููุงุช ุจุงูุนุฑุจูุฉ:

| # | ุงูุงุณู ุจุงูุนุฑุจูุฉ | ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ | Slug |
|---|----------------|-------------------|------|
| 1 | ุฅุฏุฎุงู ุจูุงูุงุช | Data Entry | data-entry |
| 2 | ุฅุฏุงุฑุฉ | Management | management |
| 3 | ุนูุงูุงุช ุนุงูุฉ | Public Relations | public-relations |
| 4 | ุณูุฑุชุงุฑูุฉ | Secretary | secretary |
| 5 | ุชุณููู | Marketing | marketing |
| 6 | ุชููู | Technical | technical |
| 7 | ุฎุฏูุฉ ุนููุงุก | Customer Service | customer-service |
| 8 | ุฃุฎุฑู | Other | other |

### 3. ุชุญุฏูุซ ุฌุฏูู `jobs`

```sql
-- ุฅุถุงูุฉ ุนููุฏ category_id
ALTER TABLE jobs ADD COLUMN category_id UUID REFERENCES job_categories(id);

-- ุชุญููู ุงูุจูุงูุงุช ุงููุฏููุฉ ุชููุงุฆูุงู
UPDATE jobs 
SET category_id = (
  SELECT id FROM job_categories 
  WHERE slug = jobs.category
)
WHERE category_id IS NULL;
```

### 4. ุตูุงุญูุงุช RLS

- **ุงููุฑุงุกุฉ**: ูุชุงุญุฉ ููุฌููุน (ุงูุชุตูููุงุช ุงููุดุทุฉ ููุท)
- **ุงููุชุงุจุฉ/ุงูุชุนุฏูู/ุงูุญุฐู**: ููุฃุฏูู ููุท

---

## ๐ป ุงูุชุนุฏููุงุช ูู ุงูููุฏ

### 1. Types (`src/types/jobs.ts`)

#### ูุจู:
```typescript
export interface Job {
  category: JobCategory;      // enum ุซุงุจุช
  governorate: string | null;  // ูุต ุญุฑ
}

export interface JobFilters {
  category?: JobCategory;
  governorate?: string;
}
```

#### ุจุนุฏ:
```typescript
export interface Job {
  category_id: string | null;     // UUID reference
  category?: any;                  // Joined data
  governorate_id: string | null;   // UUID reference
  governorate?: any;               // Joined data
}

export interface JobFilters {
  category_id?: string;
  governorate_id?: string;
}
```

### 2. Data Layer (`src/data/jobs/`)

#### ููู ุฌุฏูุฏ: `lookups.ts`

```typescript
// ุฏูุงู ุฌูุจ ุงูุชุตูููุงุช ูุงููุญุงูุธุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

export async function getActiveJobCategories(): Promise<JobCategory[]>
export async function getAllJobCategories(): Promise<JobCategory[]>
export async function getJobCategoryById(id: string): Promise<JobCategory | null>
export async function getAllGovernorates(): Promise<Governorate[]>
export async function getGovernorateById(id: string): Promise<Governorate | null>
```

#### ุชุญุฏูุซ: `queries.ts`

```typescript
// ูุจู
.from('jobs')
.select('*')
.eq('category', filters.category)

// ุจุนุฏ
.from('jobs')
.select('*, category:job_categories(id, name_ar, name_en, slug)')
.eq('category_id', filters.category_id)
```

### 3. ุตูุญุฉ ุงููุธุงุฆู (`src/app/.../jobs/page.tsx`)

#### ูุจู:
```typescript
import { JOB_CATEGORIES, GOVERNORATES } from '@/types/jobs';

<JobsGrid
  categories={JOB_CATEGORIES}      // ููู ุซุงุจุชุฉ
  governorates={GOVERNORATES}      // ููู ุซุงุจุชุฉ
/>
```

#### ุจุนุฏ:
```typescript
import { getActiveJobCategories, getAllGovernorates } from '@/data/jobs/lookups';

const [categories, governorates] = await Promise.all([
  getActiveJobCategories(),        // ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  getAllGovernorates(),            // ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
]);

<JobsGrid
  categories={categories}
  governorates={governorates}
/>
```

### 4. JobsGrid Component

#### ูุจู:
```typescript
{categories.map((cat) => (
  <SelectItem value={cat.value}>
    {cat.label}                    // ุฅูุฌููุฒู
  </SelectItem>
))}
```

#### ุจุนุฏ:
```typescript
{categories.map((cat) => (
  <SelectItem value={cat.id}>
    {cat.name_ar}                  // ุนุฑุจู
  </SelectItem>
))}
```

---

## ๐จ ุงูุตูุญุฉ ุงูุฅุฏุงุฑูุฉ ุงูุฌุฏูุฏุฉ

### ุงููุณุงุฑ
```
/app_admin/job-categories
```

### ุงูููุฒุงุช

1. **ุนุฑุถ ุฌููุน ุงูุชุตูููุงุช**
   - ุงูุชุฑุชูุจ
   - ุงูุงุณู ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
   - ุงููุนุฑู (Slug)
   - ุงูุญุงูุฉ (ูุดุท/ุบูุฑ ูุดุท)

2. **ุงูุฅุญุตุงุฆูุงุช**
   - ุฅุฌูุงูู ุงูุชุตูููุงุช
   - ุงูุชุตูููุงุช ุงููุดุทุฉ
   - ุงูุชุตูููุงุช ุบูุฑ ุงููุดุทุฉ

3. **ุงูุฅุฌุฑุงุกุงุช**
   - ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ (ูุฑูุจุงู)
   - ุชุนุฏูู ุชุตููู (ูุฑูุจุงู)
   - ุญุฐู ุชุตููู (ูุฑูุจุงู)

---

## ๐ ููุงุฑูุฉ: ูุจู ูุจุนุฏ

### ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

| ุงูููุฒุฉ | ูุจู | ุจุนุฏ |
|--------|-----|-----|
| ูุบุฉ ุงูุชุตูููุงุช | ุฅูุฌููุฒูุฉ | ุนุฑุจูุฉ โ |
| ุงูุชุตููุฉ | ุชุนูู | ุชุนูู โ |
| ุณูููุฉ ุงูููู | ุตุนุจุฉ | ุณููุฉ โ |
| ุงููุญุงูุธุงุช | ูุต ุญุฑ | ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช โ |

### ุชุฌุฑุจุฉ ุงูุฃุฏูู

| ุงูููุฒุฉ | ูุจู | ุจุนุฏ |
|--------|-----|-----|
| ุฅุถุงูุฉ ุชุตููู | ุชุนุฏูู ุงูููุฏ | ูู ููุญุฉ ุงูุชุญูู โ |
| ุชุนุฏูู ุชุตููู | ุชุนุฏูู ุงูููุฏ | ูู ููุญุฉ ุงูุชุญูู โ |
| ุญุฐู ุชุตููู | ุชุนุฏูู ุงูููุฏ | ูู ููุญุฉ ุงูุชุญูู โ |
| ุชุฑุชูุจ ุงูุชุตูููุงุช | ูุฏูู ูู ุงูููุฏ | ุฑูู ุงูุชุฑุชูุจ โ |
| ุฅุฎูุงุก ุชุตููู | ุญุฐู ูู ุงูููุฏ | ุชุบููุฑ is_active โ |

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู

1. ุงุฐูุจ ุฅูู `/jobs`
2. ุณุชุฌุฏ ุงูุชุตูููุงุช **ุจุงูุนุฑุจูุฉ** ูู ูุงุฆูุฉ ุงูููุงุชุฑ
3. ุงุฎุชุฑ ุงูุชุตููู ุงููุทููุจ (ูุซู: ุณูุฑุชุงุฑูุฉุ ุฅุฏุงุฑุฉุ ุฅูุฎ)
4. ุณุชุธูุฑ ุงููุธุงุฆู ุงููุชุนููุฉ ุจูุฐุง ุงูุชุตููู

### ููุฃุฏูู

1. ุงุฐูุจ ุฅูู `/app_admin/job-categories`
2. ุณุชุฌุฏ ูุงุฆูุฉ ุจุฌููุน ุงูุชุตูููุงุช
3. ููููู:
   - ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
   - ุฑุคูุฉ ุงูุชุตูููุงุช ุงููุดุทุฉ ูุบูุฑ ุงููุดุทุฉ
   - (ูุฑูุจุงู) ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูุชุตูููุงุช

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ูููุทูุฑูู

1. **ุงุณุชุฎุฏู `category_id` ุจุฏูุงู ูู `category`**
   ```typescript
   // โ ุฎุทุฃ
   job.category
   
   // โ ุตุญูุญ
   job.category_id
   job.category?.name_ar
   ```

2. **ุงุณุชุฎุฏู `governorate_id` ุจุฏูุงู ูู `governorate`**
   ```typescript
   // โ ุฎุทุฃ
   job.governorate
   
   // โ ุตุญูุญ
   job.governorate_id
   job.governorate?.name_ar
   ```

3. **ุงุณุชุฎุฏู ุฏูุงู lookups ูุฌูุจ ุงูุจูุงูุงุช**
   ```typescript
   import { getActiveJobCategories, getAllGovernorates } from '@/data/jobs/lookups';
   ```

### ููุฃุฏูู

1. **ุงูุชุตูููุงุช ุบูุฑ ุงููุดุทุฉ ูุง ุชุธูุฑ ูููุณุชุฎุฏููู**
   - ููููู ุฅุฎูุงุก ุชุตููู ุจุฏูุงู ูู ุญุฐูู

2. **ุชุฑุชูุจ ุงูุชุตูููุงุช**
   - ุงุณุชุฎุฏู ุญูู `display_order` ููุชุฑุชูุจ
   - ุงูุฃุฑูุงู ุงูุฃุตุบุฑ ุชุธูุฑ ุฃููุงู

3. **ุงููุนุฑู (Slug) ูุฌุจ ุฃู ูููู ูุฑูุฏุงู**
   - ูุณุชุฎุฏู ูู URLs
   - ูุง ูููู ุชูุฑุงุฑู

4. **ูุง ูููู ุญุฐู ุชุตููู ูุฑุชุจุท ุจูุธุงุฆู**
   - ูุฌุจ ููู ุงููุธุงุฆู ูุชุตููู ุขุฎุฑ ุฃููุงู

---

## โ ุงูููุงุฆุฏ

### 1. ุณูููุฉ ุงูุงุณุชุฎุฏุงู
- ุงูุชุตูููุงุช ุจุงูุนุฑุจูุฉ ุชุณูู ุงูููู
- ุงููุญุงูุธุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุถูู ุงูุชูุญูุฏ

### 2. ุงููุฑููุฉ
- ุงูุฃุฏูู ููููู ุฅุถุงูุฉ ุชุตูููุงุช ุฌุฏูุฏุฉ ุจุฏูู ุชุนุฏูู ุงูููุฏ
- ูููู ุฅุฎูุงุก/ุฅุธูุงุฑ ุงูุชุตูููุงุช ุฏููุงููููุงู

### 3. ุงูุตูุงูุฉ
- ููุฏ ุฃูุธู ูุฃุณูู ููุตูุงูุฉ
- ูุง ุญุงุฌุฉ ูุชุนุฏูู ุงูููุฏ ุนูุฏ ุฅุถุงูุฉ ุชุตูููุงุช

### 4. ุงูุฃุฏุงุก
- ุงุณุชุฎุฏุงู JOIN ุจุฏูุงู ูู queries ูุชุนุฏุฏุฉ
- Caching ุฃูุถู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

### 1. ุฅููุงู ุตูุญุฉ ุงูุฅุฏุงุฑุฉ
- [ ] ุตูุญุฉ ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ
- [ ] ุตูุญุฉ ุชุนุฏูู ุชุตููู
- [ ] ูุธููุฉ ุญุฐู ุชุตููู
- [ ] ูุธููุฉ ุชุบููุฑ ุงูุชุฑุชูุจ (drag & drop)

### 2. ุชุญุณููุงุช ุฅุถุงููุฉ
- [ ] ุฅุถุงูุฉ ุฃููููุงุช ููุชุตูููุงุช
- [ ] ุฅุญุตุงุฆูุงุช ุนุฏุฏ ุงููุธุงุฆู ููู ุชุตููู
- [ ] ุชุตุฏูุฑ ุงูุชุตูููุงุช ุฅูู Excel
- [ ] ุงุณุชูุฑุงุฏ ุชุตูููุงุช ูู Excel

### 3. ุชุญุฏูุซ ููุงุฐุฌ ุงููุธุงุฆู
- [ ] ุชุญุฏูุซ ูููุฐุฌ ุฅูุดุงุก ูุธููุฉ
- [ ] ุชุญุฏูุซ ูููุฐุฌ ุชุนุฏูู ูุธููุฉ
- [ ] ุงุณุชุฎุฏุงู select ุจุฏูุงู ูู input ููุชุตููู

---

## ๐ฆ ุงููููุงุช ุงููุชุฃุซุฑุฉ

### ูููุงุช ุฌุฏูุฏุฉ (3)
1. `supabase_job_categories_migration.sql` - ุณูุฑูุจุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. `src/data/jobs/lookups.ts` - ุฏูุงู ุฌูุจ ุงูุจูุงูุงุช
3. `src/app/[locale]/(internal-pages)/app_admin/job-categories/page.tsx` - ุตูุญุฉ ุงูุฅุฏุงุฑุฉ

### ูููุงุช ูุนุฏูุฉ (4)
1. `src/types/jobs.ts` - ุชุญุฏูุซ ุงูุฃููุงุน
2. `src/data/jobs/queries.ts` - ุชุญุฏูุซ ุงูุงุณุชุนูุงูุงุช
3. `src/app/[locale]/(external-pages)/jobs/page.tsx` - ุชุญุฏูุซ ุตูุญุฉ ุงููุธุงุฆู
4. `src/app/[locale]/(external-pages)/jobs/JobsGrid.tsx` - ุชุญุฏูุซ ูููู ุงูุนุฑุถ

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุญุฏูุซ ูุธุงู ุงููุธุงุฆู ุจูุฌุงุญ ููููู:

โ **ุนุฑุจู 100%** - ุฌููุน ุงูุชุตูููุงุช ุจุงูุนุฑุจูุฉ  
โ **ุฏููุงูููู** - ุงูุชุตูููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช  
โ **ูุงุจู ููุฅุฏุงุฑุฉ** - ุตูุญุฉ ุฅุฏุงุฑูุฉ ููุชุญูู  
โ **ููุญุฏ** - ุงุณุชุฎุฏุงู ุฌุฏูู ุงููุญุงูุธุงุช ุงูููุฌูุฏ  
โ **ุงุญุชุฑุงูู** - ููุฏ ูุธูู ูููุธู  

---

**ุงูุญุงูุฉ**: โ **ุฌุงูุฒ ููุงุณุชุฎุฏุงู**  
**Commit**: `271cf62`  
**ุงูุชุงุฑูุฎ**: 2 ููููุจุฑ 2025

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู ุชูููุฐ ุณูุฑูุจุช SQL ูู Supabase
2. ุชุญูู ูู ุตูุงุญูุงุช RLS
3. ุฑุงุฌุน ูุฐุง ุงูุชูุฑูุฑ ููุชูุงุตูู
4. ุงุชุตู ุจุงูุฏุนู ุงูููู

---

**ุชู ุจุญูุฏ ุงููู** ๐
