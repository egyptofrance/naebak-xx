# ุฏููู ุญู ุงููุดุงูู - ููุตุฉ ูุงุฆุจู

**ุขุฎุฑ ุชุญุฏูุซ:** 27 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0

ูุฐุง ุงูุฏููู ูุญุชูู ุนูู ุฌููุน ุงููุดุงูู ุงูุชู ูุงุฌููุงูุง ูู ุชุทููุฑ ููุตุฉ ูุงุฆุจู ูุงูุญููู ุงููุงุฌุญุฉ ููุง.

---

## ๐ ููุฑุณ ุงููุญุชููุงุช

1. [ูุดุงูู ุฑูุน ุงูุตูุฑ](#1-ูุดุงูู-ุฑูุน-ุงูุตูุฑ)
2. [ูุดุงูู ุงูุจุญุซ ูุงูููุชุฑุฉ](#2-ูุดุงูู-ุงูุจุญุซ-ูุงูููุชุฑุฉ)
3. [ูุดุงูู ุงูุชุตููู ูุงููุงุฌูุฉ](#3-ูุดุงูู-ุงูุชุตููู-ูุงููุงุฌูุฉ)
4. [ูุดุงูู ุงูุฃุฐููุงุช ูุงูููุงุฆู](#4-ูุดุงูู-ุงูุฃุฐููุงุช-ูุงูููุงุฆู)
5. [ูุดุงูู TypeScript](#5-ูุดุงูู-typescript)
6. [ุฃูุถู ุงูููุงุฑุณุงุช](#6-ุฃูุถู-ุงูููุงุฑุณุงุช)

---

## 1. ูุดุงูู ุฑูุน ุงูุตูุฑ

### 1.1 ูุดู ุฑูุน ุงูุตูุฑ ูููุงุฆุจ

#### ุงููุดููุฉ
```
โ ุงููุงุฆุจ ูุง ูุณุชุทูุน ุฑูุน ุตูุฑ ููุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู/ุงูุฅูุฌุงุฒุงุช/ุงูููุงุณุจุงุช
โ ุฑุณุงูุฉ ุฎุทุฃ: "ูุดู ุฑูุน ุงูุตูุฑุฉ"
```

#### ุงูุณุจุจ
```typescript
// โ ูุงู ูุณุชุฎุฏู uploadImageAction ุงููุฎุตุต ููู Admin ููุท
import { uploadImageAction } from "@/data/admin/user";

const { execute } = useAction(uploadImageAction);
```

**ุงููุดููุฉ:** `uploadImageAction` ูุญุชุงุฌ `userId` ููุนุงููุ ููู ุงููุงุฆุจ ูุง ููุฑุฑู!

#### ุงูุญู โ

**1. ุฅูุดุงุก Action ุฌุฏูุฏ ูููุงุฆุจ:**

```typescript
// src/data/deputy/content-upload.ts
"use server";

import { authActionClient } from "@/lib/safe-action";
import { createSupabaseUserServerActionClient } from "@/supabase-clients/user/createSupabaseUserServerActionClient";
import { z } from "zod";

const uploadSchema = z.object({
  fileData: z.string(), // base64
  fileName: z.string(),
  fileType: z.string(),
});

export const uploadDeputyContentImageAction = authActionClient
  .schema(uploadSchema)
  .action(async ({ parsedInput: input, ctx }) => {
    const supabase = await createSupabaseUserServerActionClient();
    
    // โ ูุญุตู ุนูู userId ูู ctx ุชููุงุฆูุงู
    const userId = ctx.userId;
    
    // Convert base64 to Buffer
    const base64Data = input.fileData.split(",")[1];
    const buffer = Buffer.from(base64Data, "base64");
    
    // Upload to Supabase Storage
    const fileName = `${Date.now()}-${input.fileName}`;
    const filePath = `deputy-content/${userId}/${fileName}`;
    
    const { data, error } = await supabase.storage
      .from("deputy-images")
      .upload(filePath, buffer, {
        contentType: input.fileType,
        upsert: false,
      });
    
    if (error) {
      throw new Error(`Failed to upload: ${error.message}`);
    }
    
    // Get public URL
    const { data: { publicUrl } } = supabase.storage
      .from("deputy-images")
      .getPublicUrl(filePath);
    
    return { url: publicUrl };
  });
```

**2. ุงุณุชุฎุฏุงู Action ุงูุฌุฏูุฏ:**

```typescript
// ูู DeputyContentItemManager.tsx
import { uploadDeputyContentImageAction } from "@/data/deputy/content-upload";

const { execute: uploadImage, status: uploadStatus } = useAction(
  uploadDeputyContentImageAction,
  {
    onSuccess: ({ data }) => {
      if (data?.url) {
        // ุชุญุฏูุซ URL ุงูุตูุฑุฉ
        handleFieldChange(index, "image_url", data.url);
        toast.success("ุชู ุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ!");
      }
    },
    onError: ({ error }) => {
      toast.error("ูุดู ุฑูุน ุงูุตูุฑุฉ");
    },
  }
);
```

#### ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ
- โ ุงุณุชุฎุฏู `authActionClient` ููุญุตูู ุนูู `userId` ุชููุงุฆูุงู
- โ ูุง ุชุณุชุฎุฏู Admin actions ูู ุตูุญุงุช ุงููุงุฆุจ
- โ ุงุณุชุฎุฏู base64 encoding ูุฑูุน ุงูุตูุฑ (ูุซู ูุธุงู ุงูุจุงูุฑ)

---

### 1.2 ูุดููุฉ TypeScript ูู ref

#### ุงููุดููุฉ
```
โ Type 'HTMLInputElement | null' is not assignable to 'void'
โ ุงูุณุทุฑ 258: ref={(el) => (fileInputRefs.current[index] = el)}
```

#### ุงูุณุจุจ
```typescript
// โ ุฎุทุฃ - ref callback ููุฑุฌุน ูููุฉ
ref={(el) => (fileInputRefs.current[index] = el)}
```

ูู Reactุ `ref` callback ูุฌุจ ุฃู ููุฑุฌุน `void` ูููุณ ูููุฉ.

#### ุงูุญู โ
```typescript
// โ ุตุญูุญ - ref callback ููุฑุฌุน void
ref={(el) => {
  fileInputRefs.current[index] = el;
}}
```

**ุงููุฑู:**
- `(el) => (expression)` - ููุฑุฌุน ูููุฉ
- `(el) => { statement; }` - ููุฑุฌุน void

---

## 2. ูุดุงูู ุงูุจุญุซ ูุงูููุชุฑุฉ

### 2.1 ุงูุจุญุซ ูุญุฏูุฏ ุจู 1000 ูุงุฆุจ ููุท

#### ุงููุดููุฉ
```
โ ุฑุณุงูุฉ: "ุนุฑุถ 1 - 20 ูู 1000 ูุชูุฌุฉ"
โ ุฑุบู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุญุชูู ุนูู 3,700 ูุงุฆุจ!
โ ุงูุจุญุซ ูุง ูุนูู ุนูู ุฌููุน ุงูููุงุจ
```

#### ุงูุณุจุจ ุงูุญูููู
**ููุณุช ุงููุดููุฉ ูู ุงูููุฏ!**

```typescript
// โ ุญุงูููุง ุชุบููุฑ limit ููู ูู ููุฌุญ
.limit(10000)   // ูุง ูุนูู!
.limit(100000)  // ูุง ูุนูู ุฃูุถุงู!
```

**ุงูุณุจุจ:** Supabase PostgREST ูู ุญุฏ ุงูุชุฑุงุถู **1000 ุตู** ููู ุทูุจ!

ูู [ูุซุงุฆู Supabase](https://supabase.com/docs/guides/api):
> PostgREST has a default maximum of 1000 rows per request.

#### ุงูุญู โ

**ุงุณุชุฎุฏุงู Pagination ูุน `.range()`:**

```typescript
// src/app/actions/deputy/getAllDeputies.ts
export async function getAllDeputies() {
  const supabase = createClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_ROLE_KEY!
  );

  // โ ุฌูุจ ุฌููุน ุงูููุงุจ ุจุงุณุชุฎุฏุงู pagination
  let allDeputies: any[] = [];
  let page = 0;
  const pageSize = 1000; // Supabase's default max
  let hasMore = true;

  while (hasMore) {
    const start = page * pageSize;
    const end = start + pageSize - 1;

    const { data: deputiesPage, error } = await supabase
      .from("deputy_profiles")
      .select(`
        id,
        user_id,
        slug,
        // ... all fields
      `)
      .range(start, end);  // โ ุงูููุชุงุญ ููุง!

    if (error) {
      console.error(`Error on page ${page}:`, error);
      break;
    }

    if (!deputiesPage || deputiesPage.length === 0) {
      hasMore = false;
      break;
    }

    allDeputies = [...allDeputies, ...deputiesPage];

    // ุฅุฐุง ุญุตููุง ุนูู ุฃูู ูู pageSizeุ ูุตููุง ููููุงูุฉ
    if (deputiesPage.length < pageSize) {
      hasMore = false;
    } else {
      page++;
    }
  }

  console.log(`โ Fetched ${allDeputies.length} deputies in ${page + 1} page(s)`);
  
  return allDeputies;
}
```

#### ููู ูุนููุ

**ูุน 3,700 ูุงุฆุจ:**

| ุงูุฏูุฑุฉ | Range | ุงููุชูุฌุฉ |
|--------|-------|---------|
| 1 | `.range(0, 999)` | 1,000 ูุงุฆุจ |
| 2 | `.range(1000, 1999)` | 1,000 ูุงุฆุจ |
| 3 | `.range(2000, 2999)` | 1,000 ูุงุฆุจ |
| 4 | `.range(3000, 3999)` | 700 ูุงุฆุจ (ุขุฎุฑ ุฏูุนุฉ) |

**ุงููุฌููุน:** 3,700 ูุงุฆุจ โ

#### ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ
- โ `.limit()` ูุง ูุชุฌุงูุฒ ุญุฏ Supabase ุงูุงูุชุฑุงุถู (1000)
- โ ุงุณุชุฎุฏู `.range()` ูุน pagination ูุฌูุจ ุฃูุซุฑ ูู 1000 ุตู
- โ ุงุณุชุฎุฏู `while` loop ููุฌูุจ ุงูุชููุงุฆู ุญุชู ุงูููุงูุฉ
- โ ุชุญูู ูู `deputiesPage.length < pageSize` ููุนุฑูุฉ ุงูููุงูุฉ

---

## 3. ูุดุงูู ุงูุชุตููู ูุงููุงุฌูุฉ

### 3.1 ุตูุญุฉ ุงููุงุฆุจ ุงูุนุงูุฉ - ูุดุงูู ูุชุนุฏุฏุฉ

#### ุงููุดููุฉ 1: ุงููุญุงุฐุงุฉ ูููุณุงุฑ ุฑุบู ุงููุบุฉ ุงูุนุฑุจูุฉ
```
โ ุงููุต ุงูุนุฑุจู ูุญุงุฐู ูููุณุงุฑ (LTR)
โ ูุฌุจ ุฃู ูููู ูุญุงุฐู ูููููู (RTL)
```

#### ุงูุญู โ
```typescript
// ูู page.tsx
const isRTL = locale === "ar";

<div dir={isRTL ? "rtl" : "ltr"}>
  {/* ุงููุญุชูู */}
</div>
```

---

#### ุงููุดููุฉ 2: ุงูุตูุฑ ูุง ุชุธูุฑ ูู ุงูุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู/ุงูุฅูุฌุงุฒุงุช/ุงูููุงุณุจุงุช

#### ุงูุณุจุจ
```typescript
// โ ุงูููุฏ ูุงู ููุฌูุฏ ููู ูู ูุชู ุนุฑุถู
{item.image_url && (
  <img src={item.image_url} alt={item.title} />
)}
```

#### ุงูุญู โ
```typescript
// โ ุฅุถุงูุฉ ุงูุตูุฑุฉ ูุน ุชูุณูู ุงุญุชุฑุงูู
{item.image_url && (
  <div className="mt-4">
    <img
      src={item.image_url}
      alt={item.title}
      className="w-full rounded-lg object-cover shadow-md"
      style={{ maxHeight: '500px' }}
    />
  </div>
)}
```

---

#### ุงููุดููุฉ 3: ูุง ุชูุฌุฏ ุตูุฑ ุงูุชุฑุงุถูุฉ

#### ุงููุทููุจ
```
โ ุตูุฑุฉ ุงูุชุฑุงุถูุฉ ุฅุฐุง ูู ูุฑูุน ุงููุงุฆุจ ุตูุฑุฉ
โ ุตูุฑุฉ ุฌุงูุจูุฉ (ูุซู ุงูุฃูุงุชุงุฑ)
โ ุชุฃุซูุฑ hover ุฌููู
```

#### ุงูุญู โ

**1. ุชุนุฑูู ุงูุตูุฑ ุงูุงูุชุฑุงุถูุฉ:**
```typescript
const DEFAULT_IMAGES = {
  electoral_program: "https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=400",
  achievement: "https://images.unsplash.com/photo-1552664730-d307ca884978?w=400",
  event: "https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",
};
```

**2. ุงุณุชุฎุฏุงู ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ:**
```typescript
<img
  src={item.image_url || DEFAULT_IMAGES.electoral_program}
  alt={item.title}
  className="w-48 h-48 rounded-lg object-cover border-4 border-primary/20 
             transition-all duration-500 hover:border-primary/60 
             hover:shadow-[0_0_30px_rgba(248,123,27,0.4)] 
             hover:scale-105"
/>
```

**3. ุงูุชุฃุซูุฑุงุช:**
- โ Border ูููู
- โ Shadow ูุชููุฌ ุนูุฏ hover
- โ Scale ููุจุฑ ููููุงู
- โ Transition ุณูุณ (500ms)

---

### 3.2 ุตูุญุฉ ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ - ุชุตููู ุณูุก

#### ุงููุดููุฉ
```
โ ุนููุฏ ูุงุญุฏ ุทููู
โ ุฃููุงู ุนุดูุงุฆูุฉ ุนูู Labels
โ ูุง ุชูุฌุฏ ุชูุณููุงุช
โ ุฒุฑ ุงูุญูุธ ูุง ูุนูู
```

#### ุงูุญู โ

**1. ุชูุณูู ุฅูู Cards:**
```typescript
<div className="space-y-6">
  {/* Card 1: ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ */}
  <Card>
    <CardHeader>
      <CardTitle className="flex items-center gap-2">
        <User className="h-5 w-5" />
        ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
      </CardTitle>
    </CardHeader>
    <CardContent>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {/* ุงูุญููู */}
      </div>
    </CardContent>
  </Card>

  {/* Card 2: ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ */}
  <Card>
    {/* ... */}
  </Card>

  {/* Card 3: ูุนูููุงุช ุงูููุชุจ */}
  <Card>
    {/* ... */}
  </Card>

  {/* Card 4: ูุณุงุฆู ุงูุชูุงุตู */}
  <Card>
    {/* ... */}
  </Card>
</div>
```

**2. Grid Layout:**
```typescript
<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
  {/* ุนููุฏ ูุงุญุฏ ุนูู ุงูููุจุงููุ ุนููุฏูู ุนูู ุงูุฏูุณูุชูุจ */}
</div>
```

**3. ุชูุนูู ุงูุญูุธ:**
```typescript
// src/data/deputy/update-data.ts
export const updateDeputyDataAction = authActionClient
  .schema(updateDeputyDataSchema)
  .action(async ({ parsedInput: input, ctx }) => {
    const supabase = await createSupabaseUserServerActionClient();
    const userId = ctx.userId;

    const { error } = await supabase
      .from("deputy_profiles")
      .update({
        bio: input.bio,
        office_address: input.office_address,
        office_phone: input.office_phone,
        // ... ุจุงูู ุงูุญููู
      })
      .eq("user_id", userId);

    if (error) {
      throw new Error("Failed to update deputy data");
    }

    return { success: true };
  });
```

---

### 3.3 ุตูุญุฉ ุฑูุน ุงููุญุชูู - ูุดุงูู UI

#### ุงููุดููุฉ
```
โ ูุง ููุฌุฏ preview ููุตูุฑุฉ ูุจู ุงูุฑูุน
โ ุฒุฑุงุฑ ุงูุญุฐู ูุชุฏุงุฎู ูุน ุงููุต
โ ุงูุฃุฒุฑุงุฑ ูุจูุฑุฉ ุฌุฏุงู
โ ุงูุชูุณูู ุบูุฑ ููุธู
```

#### ุงูุญู โ

**1. Preview ูุจู ุงูุฑูุน:**
```typescript
const [previewUrl, setPreviewUrl] = useState<string | null>(null);

const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
  const file = e.target.files?.[0];
  if (!file) return;

  // โ ุฅูุดุงุก preview ููุฑุงู
  const reader = new FileReader();
  reader.onloadend = () => {
    setPreviewUrl(reader.result as string);
  };
  reader.readAsDataURL(file);
};

// โ ุนุฑุถ Preview
{previewUrl && (
  <div className="relative">
    <img src={previewUrl} alt="Preview" className="w-full rounded-lg" />
    <Button onClick={() => setPreviewUrl(null)}>
      ุฅูุบุงุก
    </Button>
    <Button onClick={handleUpload}>
      ุฑูุน ุงูุตูุฑุฉ
    </Button>
  </div>
)}
```

**2. Header ูููุตู ููุนูุตุฑ:**
```typescript
<div className="border rounded-lg p-4">
  {/* Header */}
  <div className="flex items-center justify-between mb-4 pb-4 border-b">
    <h3 className="font-semibold">ุงูุนูุตุฑ {index + 1}</h3>
    <Button
      variant="destructive"
      size="sm"
      onClick={() => handleRemove(index)}
    >
      <Trash2 className="h-4 w-4 mr-2" />
      ุญุฐู
    </Button>
  </div>

  {/* ุงููุญุชูู */}
  <div className="space-y-4">
    {/* ุงูุญููู */}
  </div>
</div>
```

**3. Drag & Drop Area:**
```typescript
<div
  className="border-2 border-dashed border-primary/20 rounded-lg p-8 
             text-center cursor-pointer hover:border-primary/40 
             transition-colors"
  onClick={() => fileInputRef.current?.click()}
>
  <Upload className="h-12 w-12 mx-auto mb-4 text-primary/40" />
  <p className="text-sm text-muted-foreground">
    ุงุณุญุจ ูุฃููุช ุงูุตูุฑุฉ ููุงุ ุฃู ุงููุฑ ููุงุฎุชูุงุฑ
  </p>
</div>
```

---

## 4. ูุดุงูู ุงูุฃุฐููุงุช ูุงูููุงุฆู

### 4.1 "ุดูุงููู" ุชุธูุฑ ูููุงุฆุจ

#### ุงููุดููุฉ
```
โ ุงููุงุฆุจ ูุฑู "ุดูุงููู" ูู ุงููุงุฆูุฉ
โ ููู ุงููุงุฆุจ ูุง ููุฏู ุดูุงููุ ุจู ูุณุชูุจููุง!
```

#### ุงูุญู โ
```typescript
// src/components/sidebar-user-nav.tsx
const deputyProfile = await getCachedDeputyProfile();
const isDeputy = !!deputyProfile;

<SidebarMenu>
  <SidebarMenuItem>
    <Link href="/dashboard">ุงูุฑุฆูุณูุฉ</Link>
  </SidebarMenuItem>
  
  <SidebarMenuItem>
    <Link href="/deputies">ุงูููุงุจ</Link>
  </SidebarMenuItem>
  
  {/* โ ุฅุฎูุงุก "ุดูุงููู" ุนู ุงูููุงุจ */}
  {!isDeputy && (
    <SidebarMenuItem>
      <Link href="/complaints">ุดูุงููู</Link>
    </SidebarMenuItem>
  )}
  
  <SidebarMenuItem>
    <Link href="/user/settings">ุงูุฅุนุฏุงุฏุงุช</Link>
  </SidebarMenuItem>
</SidebarMenu>
```

---

### 4.2 "ุฅุฏุงุฑุฉ ุงููุงุฆุจ" ุชุฎุชูู ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช

#### ุงููุดููุฉ
```
โ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุชุ ุงููุงุฆูุฉ ุงููุณุฑู ูุง ุชุนุฑุถ "ุฅุฏุงุฑุฉ ุงููุงุฆุจ"
โ ููุท "ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ" ู"ุงูุฅุนุฏุงุฏุงุช" ุธุงูุฑูู
```

#### ุงูุณุจุจ
```typescript
// โ user-sidebar.tsx ูุง ูุณุชูุฑุฏ SidebarDeputyNav
<SidebarContent>
  <SidebarUserNav />
  {/* โ ููููุฏ! */}
  <SidebarAdminPanelNav />
</SidebarContent>
```

#### ุงูุญู โ
```typescript
// src/app/[locale]/(dynamic-pages)/(authenticated-pages)/user/@sidebar/user-sidebar.tsx
import { SidebarDeputyNav } from "@/components/sidebar-deputy-nav";
import { getCachedSoloWorkspace } from "@/lib/workspace";

export default async function UserSidebar() {
  const workspace = await getCachedSoloWorkspace();

  return (
    <Sidebar>
      <SidebarContent>
        <SidebarUserNav />
        
        {/* โ ุฅุถุงูุฉ SidebarDeputyNav */}
        {workspace && <SidebarDeputyNav workspace={workspace} />}
        
        <SidebarAdminPanelNav />
      </SidebarContent>
    </Sidebar>
  );
}
```

---

## 5. ูุดุงูู TypeScript

### 5.1 ุฎุทุฃ ref callback

#### ุงููุดููุฉ
```typescript
// โ ุฎุทุฃ
ref={(el) => (fileInputRefs.current[index] = el)}

// Error: Type 'HTMLInputElement | null' is not assignable to 'void'
```

#### ุงูุญู โ
```typescript
// โ ุตุญูุญ
ref={(el) => {
  fileInputRefs.current[index] = el;
}}
```

**ุงููุงุนุฏุฉ:**
- Arrow function ูุน `()` ููุฑุฌุน ูููุฉ
- Arrow function ูุน `{}` ููุฑุฌุน void

---

## 6. ุฃูุถู ุงูููุงุฑุณุงุช

### 6.1 ุฑูุน ุงูุตูุฑ

#### โ ุงูุนู
```typescript
// ุงุณุชุฎุฏู base64 encoding
const reader = new FileReader();
reader.onloadend = () => {
  const base64 = reader.result as string;
  uploadImage({ fileData: base64, fileName, fileType });
};
reader.readAsDataURL(file);
```

#### โ ูุง ุชูุนู
```typescript
// ูุง ุชุฑุณู File object ูุจุงุดุฑุฉ
uploadImage({ file }); // โ ูู ูุนูู
```

---

### 6.2 Supabase Queries

#### โ ุงูุนู
```typescript
// ููุญุตูู ุนูู ุฃูุซุฑ ูู 1000 ุตูุ ุงุณุชุฎุฏู pagination
let allData = [];
let page = 0;
const pageSize = 1000;

while (true) {
  const { data } = await supabase
    .from("table")
    .select("*")
    .range(page * pageSize, (page + 1) * pageSize - 1);
  
  if (!data || data.length === 0) break;
  
  allData = [...allData, ...data];
  
  if (data.length < pageSize) break;
  page++;
}
```

#### โ ูุง ุชูุนู
```typescript
// ูุง ุชุนุชูุฏ ุนูู .limit() ููุท
const { data } = await supabase
  .from("table")
  .select("*")
  .limit(100000); // โ ุณููุฑุฌุน 1000 ููุท!
```

---

### 6.3 ุงูุชุตููู

#### โ ุงูุนู
```typescript
// ุงุณุชุฎุฏู Cards ูุชูุธูู ุงููุญุชูู
<Card>
  <CardHeader>
    <CardTitle className="flex items-center gap-2">
      <Icon className="h-5 w-5" />
      ุงูุนููุงู
    </CardTitle>
  </CardHeader>
  <CardContent>
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
      {/* ุงููุญุชูู */}
    </div>
  </CardContent>
</Card>
```

```typescript
// ุงุณุชุฎุฏู Grid ููุชูุณูู
<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
  {/* responsive: ุนููุฏ ูุงุญุฏ ุนูู ุงูููุจุงููุ ุนููุฏูู ุนูู ุงูุฏูุณูุชูุจ */}
</div>
```

```typescript
// ุงุณุชุฎุฏู RTL/LTR ุญุณุจ ุงููุบุฉ
const isRTL = locale === "ar";
<div dir={isRTL ? "rtl" : "ltr"}>
  {/* ุงููุญุชูู */}
</div>
```

#### โ ูุง ุชูุนู
```typescript
// ูุง ุชุณุชุฎุฏู ุนููุฏ ูุงุญุฏ ุทููู
<div>
  <input />
  <input />
  <input />
  {/* ... 20 input */}
</div>
```

---

### 6.4 Debug Code

#### โ ุงูุนู
```typescript
// ุงุณุชุฎุฏู console.log ููุท ุฃุซูุงุก ุงูุชุทููุฑ
if (process.env.NODE_ENV === "development") {
  console.log("[DEBUG] Data:", data);
}
```

#### โ ูุง ุชูุนู
```typescript
// ูุง ุชุชุฑู debug code ูู production
console.log("๐ [DEBUG] Total deputies:", deputies.length);
alert("ERROR: deputyId is undefined!"); // โ ุฃุจุฏุงู!
```

**ูุจู ุงูู deployment:**
- โ ุงุญุฐู ุฌููุน `console.log`
- โ ุงุญุฐู ุฌููุน `alert()`
- โ ุงุญุฐู ุฌููุน debug comments

---

### 6.5 Error Handling

#### โ ุงูุนู
```typescript
// ุงุณุชุฎุฏู toast ููุฃุฎุทุงุก
import { toast } from "sonner";

try {
  await uploadImage(data);
  toast.success("ุชู ุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ!");
} catch (error) {
  toast.error("ูุดู ุฑูุน ุงูุตูุฑุฉ");
  // ูุง ุชุฑุณู error.message ูููุณุชุฎุฏู ูุจุงุดุฑุฉ
}
```

#### โ ูุง ุชูุนู
```typescript
// ูุง ุชุณุชุฎุฏู alert
try {
  await uploadImage(data);
  alert("Success!"); // โ ุบูุฑ ุงุญุชุฑุงูู
} catch (error) {
  alert(error.message); // โ ูุฏ ููุดู ูุนูููุงุช ุญุณุงุณุฉ
}
```

---

## ๐ ููุฎุต ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ

### 1. ุฑูุน ุงูุตูุฑ
- โ ุงุณุชุฎุฏู `authActionClient` ููุญุตูู ุนูู `userId` ุชููุงุฆูุงู
- โ ุงุณุชุฎุฏู base64 encoding
- โ ูุง ุชุณุชุฎุฏู Admin actions ูู ุตูุญุงุช ุงููุงุฆุจ

### 2. ุงูุจุญุซ ูุงูููุชุฑุฉ
- โ Supabase ูู ุญุฏ ุงูุชุฑุงุถู 1000 ุตู
- โ ุงุณุชุฎุฏู `.range()` ูุน pagination ูุชุฌุงูุฒ ุงูุญุฏ
- โ `.limit()` ูุง ูุชุฌุงูุฒ ุญุฏ PostgREST

### 3. ุงูุชุตููู
- โ ุงุณุชุฎุฏู Cards ูุชูุธูู ุงููุญุชูู
- โ ุงุณุชุฎุฏู Grid layout (responsive)
- โ ุงุณุชุฎุฏู RTL/LTR ุญุณุจ ุงููุบุฉ
- โ ุฃุถู ุตูุฑ ุงูุชุฑุงุถูุฉ
- โ ุฃุถู ุชุฃุซูุฑุงุช hover

### 4. ุงูุฃุฐููุงุช
- โ ุชุญูู ูู ููุน ุงููุณุชุฎุฏู ูุจู ุนุฑุถ ุงูููุงุฆู
- โ ุงุณุชุฎุฏู `getCachedDeputyProfile()` ููุชุญูู

### 5. TypeScript
- โ ref callback ูุฌุจ ุฃู ููุฑุฌุน void
- โ ุงุณุชุฎุฏู `{}` ุจุฏูุงู ูู `()` ูู arrow functions

### 6. ุฃูุถู ุงูููุงุฑุณุงุช
- โ ุงุญุฐู debug code ูุจู deployment
- โ ุงุณุชุฎุฏู toast ุจุฏูุงู ูู alert
- โ ูุง ุชูุดู error messages ูููุณุชุฎุฏู

---

## ๐ ุฑูุงุจุท ูููุฏุฉ

- [Supabase Pagination](https://supabase.com/docs/guides/api#pagination)
- [PostgREST Limits](https://postgrest.org/en/stable/api.html#limits-and-pagination)
- [React ref Callback](https://react.dev/reference/react-dom/components/common#ref-callback)
- [Next.js Server Actions](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations)

---

**ุขุฎุฑ ุชุญุฏูุซ:** 27 ุฃูุชูุจุฑ 2025  
**ุงููุณุงูููู:** ูุฑูู ุชุทููุฑ ููุตุฉ ูุงุฆุจู

