# نظام إعلانات الشركات - Company Advertisements System

## نظرة عامة

تم إضافة نظام إعلانات الشركات لمنصة الوظائف، والذي يسمح للشركات بنشر إعلانات وظائف مع رقم تليفون للتواصل المباشر دون الحاجة لنظام التقديم التقليدي.

## المميزات الجديدة

### 1. حقول قاعدة البيانات الجديدة

تم إضافة حقلين جديدين لجدول `jobs`:

- **`company_phone`** (VARCHAR(20)): رقم تليفون الشركة للإعلانات
- **`is_company_ad`** (BOOLEAN): علامة لتمييز إعلانات الشركات عن الوظائف العادية

### 2. صفحة إضافة إعلان الشركة

**المسار:** `/company-job-ad`

**الملفات:**
- `src/app/[locale]/(external-pages)/company-job-ad/page.tsx`
- `src/app/[locale]/(external-pages)/company-job-ad/CompanyJobAdForm.tsx`

**المميزات:**
- نموذج سهل لإضافة إعلان وظيفة
- التحقق من صحة رقم الهاتف المصري (يبدأ بـ 01 ويتكون من 11 رقم)
- حقول مطلوبة: اسم الشركة، رقم الهاتف، المسمى الوظيفي، الوصف، الفئة
- حقول اختيارية: المحافظة، مكان العمل، الراتب، المتطلبات، المزايا
- رسالة نجاح وإعادة توجيه تلقائية لصفحة الوظائف

### 3. عرض إعلانات الشركات

**صفحة تفاصيل الوظيفة:** `/jobs/[id]/page.tsx`

**التحسينات:**
- عرض مميز لإعلانات الشركات بتصميم gradient مع أيقونة هاتف
- رقم الهاتف قابل للنقر (tel: link) للاتصال المباشر
- إخفاء زر "قدم طلبك الآن" لإعلانات الشركات
- عرض رسالة واضحة: "متاح للاتصال المباشر - لا حاجة لملء نموذج التقديم"
- Call-to-Action مخصص في أسفل الصفحة للإعلانات

### 4. زر إضافة إعلان في صفحة الوظائف

**صفحة الوظائف الرئيسية:** `/jobs/page.tsx`

- زر بارز "أضف إعلان وظيفة لشركتك" في أعلى الصفحة
- يوجه المستخدم مباشرة لصفحة إضافة الإعلان

### 5. تحسينات تصميم الفلاتر

**الملف:** `src/app/[locale]/(external-pages)/jobs/JobsGrid.tsx`

**التحسينات:**
- إضافة أيقونات لكل فلتر (Briefcase, MapPinned, Building2, Clock)
- إضافة Labels واضحة لكل فلتر
- تحسين التباعد والتنظيم
- تحسين الاستجابة على الأجهزة المحمولة
- إضافة عداد النتائج
- تحسين رسالة "لا توجد نتائج"

## الملفات المعدلة

### ملفات TypeScript
1. **`src/types/jobs.ts`**
   - إضافة `company_phone` و `is_company_ad` لـ `Job` interface
   - إضافة الحقول لـ `CreateJobInput` interface

### ملفات البيانات
2. **`src/data/jobs/mutations.ts`** (جديد)
   - `createJob()`: إنشاء وظيفة أو إعلان شركة
   - `updateJob()`: تحديث وظيفة موجودة
   - `deleteJob()`: حذف وظيفة

### ملفات الصفحات
3. **`src/app/[locale]/(external-pages)/company-job-ad/page.tsx`** (جديد)
4. **`src/app/[locale]/(external-pages)/company-job-ad/CompanyJobAdForm.tsx`** (جديد)
5. **`src/app/[locale]/(external-pages)/jobs/page.tsx`** (معدل)
6. **`src/app/[locale]/(external-pages)/jobs/[id]/page.tsx`** (معدل)
7. **`src/app/[locale]/(external-pages)/jobs/JobsGrid.tsx`** (معدل)

### ملفات SQL
8. **`supabase_add_company_ads_fields.sql`** (جديد)
   - SQL script لإضافة الحقول الجديدة
   - إنشاء index للأداء
   - إضافة تعليقات على الحقول

## خطوات التطبيق

### 1. تحديث قاعدة البيانات

قم بتنفيذ SQL Script في Supabase:

```sql
-- إضافة حقل company_phone
ALTER TABLE jobs 
ADD COLUMN IF NOT EXISTS company_phone VARCHAR(20);

-- إضافة حقل is_company_ad
ALTER TABLE jobs 
ADD COLUMN IF NOT EXISTS is_company_ad BOOLEAN DEFAULT FALSE;

-- إنشاء index
CREATE INDEX IF NOT EXISTS idx_jobs_is_company_ad 
ON jobs(is_company_ad) WHERE is_company_ad = true;
```

### 2. دفع الكود إلى GitHub

```bash
cd /home/ubuntu/naebak-xx
git add .
git commit -m "Add company advertisements system with improved filters"
git push origin main
```

### 3. التحقق من Deployment في Vercel

سيتم deployment تلقائياً عند push إلى GitHub.

## كيفية الاستخدام

### للشركات (إضافة إعلان):

1. زيارة صفحة الوظائف: `/jobs`
2. النقر على زر "أضف إعلان وظيفة لشركتك"
3. ملء النموذج بالمعلومات المطلوبة
4. إدخال رقم تليفون صحيح (01xxxxxxxxx)
5. النقر على "نشر الإعلان"

### للباحثين عن عمل (التقديم):

1. تصفح الوظائف في صفحة `/jobs`
2. النقر على وظيفة للاطلاع على التفاصيل
3. **إذا كانت وظيفة عادية:** النقر على "قدم طلبك الآن"
4. **إذا كانت إعلان شركة:** الاتصال مباشرة بالرقم المعروض

## الفروقات بين الوظائف العادية وإعلانات الشركات

| الميزة | وظيفة عادية | إعلان شركة |
|--------|-------------|-----------|
| نظام التقديم | نموذج تقديم إلكتروني | اتصال مباشر بالهاتف |
| رقم الهاتف | اختياري (للإدارة) | مطلوب (للمتقدمين) |
| زر التقديم | "قدم طلبك الآن" | "اتصل الآن" |
| التصميم | عادي | مميز بـ gradient وأيقونة |
| الحقل `is_company_ad` | `false` | `true` |

## الأمان والتحقق

### التحقق من رقم الهاتف

```typescript
const phoneRegex = /^(01)[0-9]{9}$/;
if (!phoneRegex.test(formData.company_phone.replace(/[\s-]/g, ''))) {
  throw new Error('رقم الهاتف غير صحيح. يجب أن يبدأ بـ 01 ويتكون من 11 رقم');
}
```

### الحقول المطلوبة

- اسم الشركة
- رقم تليفون الشركة
- المسمى الوظيفي
- وصف الوظيفة
- الفئة الوظيفية

## التطويرات المستقبلية المقترحة

1. **نظام التحقق من الشركات:**
   - التحقق من صحة الشركات قبل نشر الإعلانات
   - إضافة نظام تسجيل للشركات

2. **لوحة تحكم للشركات:**
   - إدارة إعلانات الشركة
   - إحصائيات المشاهدات والاتصالات

3. **نظام الدفع:**
   - إعلانات مجانية محدودة
   - إعلانات مميزة مدفوعة

4. **التقييمات والمراجعات:**
   - تقييم الشركات من المتقدمين
   - نظام التبليغ عن إعلانات وهمية

5. **إشعارات WhatsApp:**
   - إرسال رسالة WhatsApp تلقائية عند النقر على "اتصل الآن"

## الدعم الفني

في حالة وجود مشاكل:
1. التحقق من تنفيذ SQL Script بشكل صحيح
2. التحقق من RLS policies في Supabase
3. مراجعة Vercel deployment logs
4. التحقق من TypeScript compilation errors

## الخلاصة

تم تطوير نظام إعلانات الشركات بنجاح مع تحسينات شاملة لتصميم الفلاتر. النظام جاهز للاستخدام بعد تنفيذ SQL Script في قاعدة البيانات.

---

**تاريخ الإنشاء:** 2 نوفمبر 2025  
**الإصدار:** 1.0  
**الحالة:** جاهز للـ deployment
