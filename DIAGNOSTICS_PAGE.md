# ุตูุญุฉ ุงูุชุดุฎูุต - System Diagnostics

**ุงููุณุงุฑ:** `/en/app_admin/diagnostics`  
**ุงูุตูุงุญูุงุช:** Admin ููุท

---

## ๐ฏ ุงูุบุฑุถ

ุตูุญุฉ ุดุงููุฉ ูุงูุชุดุงู ุฌููุน ุงูุฃุฎุทุงุก ูุงููุดุงูู ูู ุงููุธุงู ุจุดูู ุชููุงุฆู.

---

## โ ุงููุญูุตุงุช ุงูุชู ุชููู ุจูุง

### 1. Users (ุงููุณุชุฎุฏููู)

#### โ Users Without Workspace
- **ุงููุตู:** ุงูุจุญุซ ุนู ูุณุชุฎุฏููู ููุณ ูุฏููู workspace
- **ุงูุญุงูุฉ ุงููุซุงููุฉ:** 0 ูุณุชุฎุฏููู
- **ุฅุฐุง ูุฌุฏุช ูุดููุฉ:** ูุฌุจ ุชุดุบูู SQL ูุฅูุดุงุก workspace ููู

#### โ๏ธ Users Without Avatar
- **ุงููุตู:** ุงูุจุญุซ ุนู ูุณุชุฎุฏููู ุจุฏูู ุตูุฑุฉ ุดุฎุตูุฉ
- **ุงูุญุงูุฉ:** ุชุญุฐูุฑ (ููุณ ุฎุทุฃ ุญุฑุฌ)
- **ุงูุชุฃุซูุฑ:** ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูู

#### โน๏ธ Admin Users
- **ุงููุตู:** ุนุฑุถ ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุงูุฐูู ูุฏููู ุตูุงุญูุงุช Admin
- **ุงูุญุงูุฉ:** ูุนูููุงุช ููุท

---

### 2. Workspaces

#### โ Workspaces Without Settings
- **ุงููุตู:** ุงูุจุญุซ ุนู workspaces ุจุฏูู `workspace_application_settings`
- **ุงูุญุงูุฉ ุงููุซุงููุฉ:** 0 workspaces
- **ุฅุฐุง ูุฌุฏุช ูุดููุฉ:** ูุฌุจ ุฅุถุงูุฉ settings ููู

#### โ Workspaces Without Owner
- **ุงููุตู:** ุงูุจุญุซ ุนู workspaces ููุณ ููุง owner
- **ุงูุญุงูุฉ ุงููุซุงููุฉ:** 0 workspaces
- **ุฅุฐุง ูุฌุฏุช ูุดููุฉ:** ุฎุทุฃ ุญุฑุฌ - ูุฌุจ ุฅุตูุงุญู ููุฑุงู

#### โ๏ธ Members Without Permissions
- **ุงููุตู:** ุงูุจุญุซ ุนู ุฃุนุถุงุก workspace ุจุฏูู permissions
- **ุงูุญุงูุฉ:** ุชุญุฐูุฑ
- **ุงูุชุฃุซูุฑ:** ูุฏ ูุง ูุชููููู ูู ุงูููุงู ุจุฃู ุนูููุงุช

---

### 3. Statistics (ุงูุฅุญุตุงุฆูุงุช)

#### โน๏ธ Database Statistics
- **ุงููุตู:** ุนุฑุถ ุฅุญุตุงุฆูุงุช ุนุงูุฉ ุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงูุจูุงูุงุช:**
  - ุนุฏุฏ ุงููุณุชุฎุฏููู
  - ุนุฏุฏ Workspaces
  - ุนุฏุฏ ุงูุฃุนุถุงุก
  - ุนุฏุฏ Settings

---

## ๐จ ูุงุฌูุฉ ุงูุตูุญุฉ

### ุงูุนูุงุตุฑ ุงูุฑุฆูุณูุฉ:

1. **Header:**
   - ุนููุงู ุงูุตูุญุฉ
   - ุนุฏุฏ ุงูุฃุฎุทุงุก ูุงูุชุญุฐูุฑุงุช

2. **Summary Cards:**
   - Total Checks (ุฅุฌูุงูู ุงููุญูุตุงุช)
   - Passed (ุงููุงุฌุญุฉ)
   - Issues Found (ุงููุดุงูู ุงูููุชุดูุฉ)

3. **Results by Category:**
   - ูู ูุฆุฉ ูู Card ูููุตูุฉ
   - ูู ูุญุต ูู Alert ูุน:
     - ุฃููููุฉ ุงูุญุงูุฉ (โ โ โ โน)
     - Badge ููุญุงูุฉ
     - ุฑุณุงูุฉ ุชูุถูุญูุฉ
     - ุชูุงุตูู ุฅุถุงููุฉ (ุฅุฐุง ูุฌุฏุช)
     - ุงูุจูุงูุงุช ุงููุงููุฉ (ูุงุจูุฉ ููุชูุณูุน)

4. **Footer:**
   - ูุนูููุงุช ุนู ุขุฎุฑ ุชุดุบูู
   - ููุฎุต ุงูุญุงูุฉ

---

## ๐จ ุงูุฃููุงู ูุงูุญุงูุงุช

| ุงูุญุงูุฉ | ุงูููู | ุงูุฃููููุฉ | ุงููุนูู |
|--------|-------|---------|---------|
| Success | ุฃุฎุถุฑ | โ | ูู ุดูุก ุนูู ูุง ูุฑุงู |
| Error | ุฃุญูุฑ | โ | ุฎุทุฃ ุญุฑุฌ ูุฌุจ ุฅุตูุงุญู |
| Warning | ุฃุตูุฑ | โ | ุชุญุฐูุฑ - ููุณ ุญุฑุฌ ููู ููุถู ุงูุฅุตูุงุญ |
| Info | ุฃุฒุฑู | โน | ูุนูููุงุช ููุท |

---

## ๐ ูุซุงู ุนูู ุงููุชุงุฆุฌ

### ุญุงูุฉ ุตุญูุฉ (All Clear):
```
โ All Clear
Total Checks: 7
Passed: 7
Issues Found: 0
```

### ุญุงูุฉ ุจูุง ูุดุงูู:
```
โ 2 Errors  โ๏ธ 1 Warning
Total Checks: 7
Passed: 4
Issues Found: 3

Errors:
- Users Without Workspace: Found 2 users
- Workspaces Without Settings: Found 1 workspace

Warnings:
- Users Without Avatar: Found 5 users
```

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงููุตูู ููุตูุญุฉ:
```
https://naebak.com/en/app_admin/diagnostics
```

### 2. ูุฑุงุกุฉ ุงููุชุงุฆุฌ:
- ุงูุธุฑ ุฅูู ุงูู Summary ูู ุงูุฃุนูู
- ุฅุฐุง ูุงู "All Clear" โ ูู ุดูุก ุชูุงู โ
- ุฅุฐุง ูุงู ููุงู Errors โ ุงูุฑุฃ ุงูุชูุงุตูู

### 3. ุนุฑุถ ุงูุจูุงูุงุช:
- ุงุถุบุท ุนูู "View Data" ูุฑุคูุฉ ุงูุจูุงูุงุช ุงููุงููุฉ
- ููููู ูุณุฎ ุงูู JSON ููุชุญููู

### 4. ุงูุฅุตูุงุญ:
- ูู ุฎุทุฃ ูุญุชูู ุนูู ุฑุณุงูุฉ ุชูุถูุญูุฉ
- ุงุณุชุฎุฏู ุงูู SQL ุงูููุงุณุจ ููุฅุตูุงุญ

---

## ๐๏ธ ุฅุถุงูุฉ ูุญูุตุงุช ุฌุฏูุฏุฉ

ูุฅุถุงูุฉ ูุญุต ุฌุฏูุฏุ ุฃุถู ุงูููุฏ ูู ุฏุงูุฉ `runDiagnostics()`:

```typescript
// ูุซุงู: ุงูุชุญูู ูู Projects ุจุฏูู Team Members
try {
  const { data: projectsWithoutMembers, error } = await supabase
    .from("projects")
    .select("id, name")
    .not("id", "in", supabase.from("project_team_members").select("project_id"));

  if (error) throw error;

  results.push({
    category: "Projects",
    name: "Projects Without Members",
    status: projectsWithoutMembers && projectsWithoutMembers.length > 0 ? "warning" : "success",
    message: projectsWithoutMembers && projectsWithoutMembers.length > 0
      ? `Found ${projectsWithoutMembers.length} projects without members`
      : "All projects have members",
    data: projectsWithoutMembers,
  });
} catch (e: any) {
  results.push({
    category: "Projects",
    name: "Projects Without Members",
    status: "error",
    message: "Failed to check projects",
    details: e.message,
  });
}
```

---

## ๐ ุงูุฃูุงู

- โ ุงูุตูุญุฉ ูู ูุฌูุฏ `(admin-pages)` โ Admin ููุท
- โ ุชุณุชุฎุฏู `createSupabaseUserServerComponentClient` โ Row Level Security ููุนู
- โ ูุง ุชุนุฑุถ ูุนูููุงุช ุญุณุงุณุฉ (passwords, tokens, etc.)
- โ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ ูุฎููุฉ ุจุดูู ุงูุชุฑุงุถู (ุฏุงุฎู `<details>`)

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. Performance:
- ุงูุตูุญุฉ ุชููู ุจุนุฏุฉ queries ูู ููุณ ุงูููุช
- ูุฏ ุชุฃุฎุฐ 2-3 ุซูุงูู ููุชุญููู
- ูููู ุชุญุณูููุง ุจุฅุถุงูุฉ caching ูุงุญูุงู

### 2. Real-time:
- ุงููุชุงุฆุฌ ุชูุญุฏูุซ ุนูุฏ ูู refresh
- ููุณุช real-time (ูุง ุชุณุชุฎุฏู subscriptions)
- ูููู ุฅุถุงูุฉ ุฒุฑ "Refresh" ูุงุญูุงู

### 3. Permissions:
- ุชุชุทูุจ ุตูุงุญูุงุช Admin
- ุฅุฐุง ุญุงูู ูุณุชุฎุฏู ุนุงุฏู ุงููุตููุ ุณูุญุตู ุนูู 403

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ูุตูุฑุฉ ุงููุฏู:
- [ ] ุฅุถุงูุฉ ุฒุฑ "Auto-fix" ูุฅุตูุงุญ ุงููุดุงูู ุชููุงุฆูุงู
- [ ] ุฅุถุงูุฉ ุฒุฑ "Refresh" ุจุฏูู reload ุงูุตูุญุฉ
- [ ] ุฅุถุงูุฉ export ูููุชุงุฆุฌ (JSON, CSV)

### ูุชูุณุทุฉ ุงููุฏู:
- [ ] ุฅุถุงูุฉ Scheduled Diagnostics (ุชุดุบูู ุชููุงุฆู ูู ุณุงุนุฉ)
- [ ] ุฅุฑุณุงู Email ุนูุฏ ุงูุชุดุงู ุฃุฎุทุงุก ุญุฑุฌุฉ
- [ ] Dashboard ููู diagnostics history

### ุทูููุฉ ุงููุฏู:
- [ ] AI-powered suggestions ููุฅุตูุงุญ
- [ ] Integration ูุน monitoring tools (Sentry, etc.)
- [ ] Performance metrics

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุตูุญุฉ ุงูุชุดุฎูุต ูู ุฃุฏุงุฉ ูููุฉ ูู:
- โ ุงูุชุดุงู ุงููุดุงูู ูุจูุฑุงู
- โ ูุฑุงูุจุฉ ุตุญุฉ ุงููุธุงู
- โ ุชุณููู ุงูุตูุงูุฉ
- โ ุชูููุฑ ุงูููุช ูู debugging

**ุงุณุชุฎุฏููุง ุจุงูุชุธุงู ููุญูุงุธ ุนูู ุตุญุฉ ุงููุธุงู!** ๐

