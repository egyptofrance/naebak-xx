# ุจููุฉ ุฃููุงุน ุงููุณุชุฎุฏููู ูู ููุตุฉ ูุงุฆุจู

## ุงูุชุงุฑูุฎ
20 ุฃูุชูุจุฑ 2025

---

## ูุธุฑุฉ ุนุงูุฉ

ููุตุฉ ูุงุฆุจู ุชุฏุนู **3 ุฃููุงุน ุฑุฆูุณูุฉ ูู ุงููุณุชุฎุฏููู**:

1. **ุงูููุงุทู (Citizen)** - ุงููุณุชุฎุฏู ุงูุนุงุฏู
2. **ุงููุงุฆุจ (Deputy)** - ุนุถู ูุฌูุณ (ูุฑุดุญ ุฃู ูุงุฆุจ ุญุงูู)
3. **ุงููุฏูุฑ (Manager/Admin)** - ูุฏูุฑ ุงููุธุงู

---

## ุงูุจููุฉ ุงููุฑููุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           ูุงุนุฏุฉ ุงูุจูุงูุงุช                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                   โ
        โโโโโโโโโโโโดโโโโโโโโโโโ
        โ                     โ
   user_profiles         user_roles
   (ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ)    (ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช)
        โ                     โ
        โ              โโโโโโโโดโโโโโโโ
        โ              โ             โ
        โ          citizen       deputy/admin
        โ              โ             โ
        โ              โ      deputy_profiles
        โ              โ      (ุจูุงูุงุช ุฅุถุงููุฉ ูููุงุฆุจ)
        โโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโ
```

---

## 1. ุงูููุงุทู (Citizen)

### ุงููุตู:
ุงููุณุชุฎุฏู ุงูุนุงุฏู ุงูุฐู ูุณุชุฎุฏู ุงูููุตุฉ ููุชูุงุตู ูุน ุงูููุงุจ ูุชูููููู.

### ุงูุจูุงูุงุช ุงููุฎุฒูุฉ:

#### ูู ุฌุฏูู `user_profiles`:
```typescript
{
  id: UUID,                    // ูุนุฑู ูุฑูุฏ
  full_name: string,           // ุงูุงุณู ุงููุงูู
  email: string,               // ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  phone: string,               // ุฑูู ุงููุงุชู
  avatar_url: string,          // ุตูุฑุฉ ุงูููู ุงูุดุฎุตู
  
  // ุงูุจูุงูุงุช ุงูุฌุบุฑุงููุฉ
  governorate_id: UUID,        // ุงููุญุงูุธุฉ
  city: string,                // ุงููุฏููุฉ
  district: string,            // ุงูุญู/ุงูููุทูุฉ
  village: string,             // ุงููุฑูุฉ
  address: string,             // ุงูุนููุงู ุงูุชูุตููู
  electoral_district: string,  // ุงูุฏุงุฆุฑุฉ ุงูุงูุชุฎุงุจูุฉ
  
  // ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
  gender: string,              // ุงูุฌูุณ
  job_title: string,           // ุงููููุฉ
  
  // ุงูุงูุชูุงุก ุงูุณูุงุณู (ุงุฎุชูุงุฑู)
  party_id: UUID,              // ุงูุญุฒุจ (ุฅุฐุง ูุงู ููุชูู)
  
  // ุงูุจูุงูุงุช ุงูุชูููุฉ
  role: 'citizen',             // ุงูููุน ุงูุงูุชุฑุงุถู
  created_at: timestamp,       // ุชุงุฑูุฎ ุงูุชุณุฌูู
}
```

#### ูู ุฌุฏูู `user_roles`:
```typescript
{
  id: UUID,
  user_id: UUID,
  role: 'citizen'  // ุฃู ุจุฏูู ุฏูุฑ (ุงูููุงุทู ุงูุนุงุฏู ูุง ูุญุชุงุฌ ุฏูุฑ ุฎุงุต)
}
```

### ุงูุตูุงุญูุงุช:
- โ ุนุฑุถ ูููุงุช ุงูููุงุจ
- โ ุชูููู ุงูููุงุจ
- โ ุงูุชูุงุตู ูุน ุงูููุงุจ
- โ ุนุฑุถ ุงูุฅูุฌุงุฒุงุช ูุงูููุงุณุจุงุช
- โ ูุชุงุจุนุฉ ุงูุฃุฎุจุงุฑ
- โ ุฅุฏุงุฑุฉ ุงููุญุชูู
- โ ุงููุตูู ูููุญุฉ ุงูุฃุฏูู

---

## 2. ุงููุงุฆุจ (Deputy)

### ุงููุตู:
ุนุถู ูุฌูุณ (ูุงุฆุจ ุญุงูู ุฃู ูุฑุดุญ) ูู ููู ุนุงู ุนูู ุงูููุตุฉ.

### ุงูุจูุงูุงุช ุงููุฎุฒูุฉ:

#### ูู ุฌุฏูู `user_profiles`:
```typescript
{
  // ููุณ ุจูุงูุงุช ุงูููุงุทู +
  role: 'deputy',  // (ูุฏูู - ููู user_roles ูู ุงูุฃุณุงุณู ุงูุขู)
}
```

#### ูู ุฌุฏูู `user_roles`:
```typescript
{
  id: UUID,
  user_id: UUID,
  role: 'deputy'  // โ ูุฐุง ูู ุงูููู
}
```

#### ูู ุฌุฏูู `deputy_profiles` (ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ):
```typescript
{
  id: UUID,                        // ูุนุฑู ูุฑูุฏ
  user_id: UUID,                   // ุฑุจุท ุจุงููุณุชุฎุฏู
  
  // ุงูุญุงูุฉ
  deputy_status: 'active' | 'inactive' | 'candidate',
  // - active: ูุงุฆุจ ุญุงูู
  // - inactive: ูุงุฆุจ ุณุงุจู
  // - candidate: ูุฑุดุญ
  
  // ุงูุจูุงูุงุช ุงูุงูุชุฎุงุจูุฉ
  electoral_symbol: string,        // ุงูุฑูุฒ ุงูุงูุชุฎุงุจู (ูุซู: โ๏ธ, ๐)
  electoral_number: string,        // ุงูุฑูู ุงูุงูุชุฎุงุจู
  electoral_program: text,         // ุงูุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู (ูุต ุทููู)
  
  // ุงูุฅูุฌุงุฒุงุช ูุงููุนุงููุงุช
  achievements: text,              // ุงูุฅูุฌุงุฒุงุช (ูุต ุทููู)
  events: text,                    // ุงูููุงุณุจุงุช/ุงููุนุงููุงุช (ูุต ุทููู)
  
  // ุงููุฌูุณ
  council_id: UUID,                // ุงููุฌูุณ ุงูููุชูู ุฅููู
  // ูุซู: ูุฌูุณ ุงูููุงุจุ ูุฌูุณ ุงูุดููุฎุ ุงููุฌุงูุณ ุงููุญููุฉ
  
  // ูุนูููุงุช ุงูููุชุจ
  office_address: text,            // ุนููุงู ุงูููุชุจ
  office_phone: string,            // ูุงุชู ุงูููุชุจ
  office_hours: string,            // ุณุงุนุงุช ุงูุนูู
  
  // ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ
  bio: text,                       // ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ
  
  // ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู
  social_media_facebook: string,
  social_media_twitter: string,
  social_media_instagram: string,
  social_media_youtube: string,
  website_url: string,
  
  // ุงูุชูููู
  initial_rating_avg: numeric,    // ูุชูุณุท ุงูุชูููู ุงูุฃููู
  
  // ุงูุจูุงูุงุช ุงูุชูููุฉ
  created_at: timestamp,
  updated_at: timestamp,
}
```

### ุงูุตูุงุญูุงุช:
- โ ุฌููุน ุตูุงุญูุงุช ุงูููุงุทู
- โ ุชุนุฏูู ูููู ุงูุดุฎุตู
- โ ุฅุถุงูุฉ/ุชุนุฏูู ุงูุฅูุฌุงุฒุงุช
- โ ุฅุถุงูุฉ/ุชุนุฏูู ุงูููุงุณุจุงุช
- โ ุชุนุฏูู ุงูุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู
- โ ุงูุฑุฏ ุนูู ุฑุณุงุฆู ุงูููุงุทููู
- โ ุงููุตูู ูููุญุฉ ุงูุฃุฏูู (ุฅูุง ุฅุฐุง ูุงู admin ุฃูุถุงู)

---

## 3. ุงููุฏูุฑ (Manager/Admin)

### ุงููุตู:
ูุฏูุฑ ุงููุธุงู ุงูุฐู ูู ุตูุงุญูุงุช ูุงููุฉ ุนูู ุงูููุตุฉ.

### ุงูุจูุงูุงุช ุงููุฎุฒูุฉ:

#### ูู ุฌุฏูู `user_profiles`:
```typescript
{
  // ููุณ ุจูุงูุงุช ุงูููุงุทู
  role: 'admin',  // (ูุฏูู)
}
```

#### ูู ุฌุฏูู `user_roles`:
```typescript
{
  id: UUID,
  user_id: UUID,
  role: 'admin'  // โ ูุฐุง ูู ุงูููู
}
```

### ุงูุตูุงุญูุงุช:
- โ ุฌููุน ุตูุงุญูุงุช ุงูููุงุทู
- โ ุงููุตูู ูููุญุฉ ุงูุฃุฏูู
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- โ ุชุฑููุฉ ููุงุทู ุฅูู ูุงุฆุจ
- โ ุชุฑููุฉ ููุงุทู ุฅูู ูุฏูุฑ
- โ ุชุนุฏูู ูููุงุช ุงูููุงุจ
- โ ุฅุฏุงุฑุฉ ุงููุญุชูู
- โ ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
- โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช

---

## ุนูููุฉ ุงูุชุฑููุฉ

### ูู ููุงุทู ุฅูู ูุงุฆุจ:

```typescript
// ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ุฏูุฑ "deputy" ูู user_roles
INSERT INTO user_roles (user_id, role) 
VALUES (user_id, 'deputy');

// ุงูุฎุทูุฉ 2: ุฅูุดุงุก ููู ูู deputy_profiles
INSERT INTO deputy_profiles (
  user_id, 
  deputy_status,
  // ุจุงูู ุงูุญููู ุงุฎุชูุงุฑูุฉ
) VALUES (
  user_id,
  'active' // ุฃู 'candidate'
);
```

**ุงููุชูุฌุฉ:**
- โ ุงููุณุชุฎุฏู ุงูุขู ูุงุฆุจ
- โ ูู ุฌููุน ุจูุงูุงุช ุงูููุงุทู ุงูุฃุณุงุณูุฉ
- โ ูู ููู ูุงุฆุจ ุฅุถุงูู ุจุงูุจูุงูุงุช ุงูุงูุชุฎุงุจูุฉ
- โ ููููู ุชุนุฏูู ูููู ููุงุฆุจ

### ูู ููุงุทู ุฅูู ูุฏูุฑ:

```typescript
// ุฅุถุงูุฉ ุฏูุฑ "admin" ูู user_roles
INSERT INTO user_roles (user_id, role) 
VALUES (user_id, 'admin');
```

**ุงููุชูุฌุฉ:**
- โ ุงููุณุชุฎุฏู ุงูุขู ูุฏูุฑ
- โ ูู ุตูุงุญูุงุช ูุงููุฉ
- โ ููููู ุงููุตูู ูููุญุฉ ุงูุฃุฏูู

---

## ุงูุฌุฏุงูู ุงูุฅุถุงููุฉ ููููุงุจ

### 1. ุฌุฏูู `deputy_achievements` (ุบูุฑ ูุณุชุฎุฏู ุญุงููุงู)
```typescript
{
  id: UUID,
  deputy_id: UUID,
  title: string,
  description: text,
  achievement_date: date,
  image_url: string,
  added_by: UUID,
  created_at: timestamp,
}
```

**ููุงุญุธุฉ:** ุญุงููุงู ูุณุชุฎุฏู ุญูู `achievements` ูู `deputy_profiles` ููุต ุทููู.

### 2. ุฌุฏูู `deputy_events` (ุบูุฑ ูุณุชุฎุฏู ุญุงููุงู)
```typescript
{
  id: UUID,
  deputy_id: UUID,
  title: string,
  description: text,
  event_date: date,
  location: string,
  image_url: string,
  added_by: UUID,
  created_at: timestamp,
}
```

**ููุงุญุธุฉ:** ุญุงููุงู ูุณุชุฎุฏู ุญูู `events` ูู `deputy_profiles` ููุต ุทููู.

### 3. ุฌุฏูู `events` (ุนุงู)
```typescript
{
  id: UUID,
  deputy_id: UUID,
  workspace_id: UUID,
  title: string,
  description: text,
  image_url: string,
  event_date: date,
  location: string,
  added_by: UUID,
  created_at: timestamp,
}
```

---

## ุฌุฏูู ุงูููุงุฑูุฉ

| ุงูููุฒุฉ | ุงูููุงุทู | ุงููุงุฆุจ | ุงููุฏูุฑ |
|--------|---------|--------|--------|
| **ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ** | โ | โ | โ |
| ุงูุงุณูุ ุงูุจุฑูุฏุ ุงููุงุชู | โ | โ | โ |
| ุงููุญุงูุธุฉุ ุงููุฏููุฉ | โ | โ | โ |
| ุงูุฏุงุฆุฑุฉ ุงูุงูุชุฎุงุจูุฉ | โ | โ | โ |
| ุงูุญุฒุจ (ุงุฎุชูุงุฑู) | โ | โ | โ |
| **ุจูุงูุงุช ุงููุงุฆุจ** | โ | โ | โ |
| ุงูุฑูุฒ ุงูุงูุชุฎุงุจู | โ | โ | โ |
| ุงูุฑูู ุงูุงูุชุฎุงุจู | โ | โ | โ |
| ุงูุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู | โ | โ | โ |
| ุงูุฅูุฌุงุฒุงุช | โ | โ | โ |
| ุงูููุงุณุจุงุช | โ | โ | โ |
| ุงููุฌูุณ | โ | โ | โ |
| ุงูุญุงูุฉ (ูุฑุดุญ/ูุงุฆุจ) | โ | โ | โ |
| ูุนูููุงุช ุงูููุชุจ | โ | โ | โ |
| **ุงูุตูุงุญูุงุช** | | | |
| ุนุฑุถ ุงูููุงุจ | โ | โ | โ |
| ุชูููู ุงูููุงุจ | โ | โ | โ |
| ุชุนุฏูู ุงูููู ุงูุดุฎุตู | โ | โ | โ |
| ุชุนุฏูู ููู ุงููุงุฆุจ | โ | โ (ูููู ููุท) | โ (ุฌููุน ุงููููุงุช) |
| ููุญุฉ ุงูุฃุฏูู | โ | โ | โ |
| ุชุฑููุฉ ุงููุณุชุฎุฏููู | โ | โ | โ |
| ุฅุฏุงุฑุฉ ุงููุญุชูู | โ | โ | โ |

---

## ุญุงูุงุช ุงูุงุณุชุฎุฏุงู

### 1. ููุงุทู ุนุงุฏู ูุฑูุฏ ุชูููู ูุงุฆุจ:
```
1. ูุณุฌู ุฏุฎูู ูููุงุทู
2. ูุจุญุซ ุนู ุงููุงุฆุจ
3. ูุนุฑุถ ููู ุงููุงุฆุจ (ุงูุจุฑูุงูุฌุ ุงูุฅูุฌุงุฒุงุชุ ุงูููุงุณุจุงุช)
4. ูุถุน ุชูููู
```

### 2. ูุฑุดุญ ูุฑูุฏ ุฅูุดุงุก ููู:
```
1. ูุณุฌู ูููุงุทู ุนุงุฏู
2. ุงูุฃุฏูู ูุฑููู ุฅูู ูุงุฆุจ
3. ูุชู ุฅูุดุงุก ููู deputy_profiles ุจุญุงูุฉ 'candidate'
4. ุงููุฑุดุญ ูุนุฏู ูููู:
   - ูุถูู ุงูุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู
   - ูุถูู ุงูุฑูุฒ ูุงูุฑูู ุงูุงูุชุฎุงุจู
   - ูุถูู ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ
```

### 3. ูุงุฆุจ ุญุงูู ูุฑูุฏ ุฅุถุงูุฉ ุฅูุฌุงุฒ:
```
1. ูุณุฌู ุฏุฎูู ููุงุฆุจ
2. ูุฐูุจ ููููู ุงูุดุฎุตู
3. ูุนุฏู ุญูู "ุงูุฅูุฌุงุฒุงุช"
4. ูุญูุธ ุงูุชุบููุฑุงุช
```

### 4. ุฃุฏูู ูุฑูุฏ ุชุฑููุฉ ููุงุทู ุฅูู ูุงุฆุจ:
```
1. ูุณุฌู ุฏุฎูู ูุฃุฏูู
2. ูุฐูุจ ุฅูู Users
3. ูุจุญุซ ุนู ุงูููุงุทู
4. ูุถุบุท "ุชุฑููุฉ ุฅูู ูุงุฆุจ"
5. ูุฎุชุงุฑ ุงูุญุงูุฉ: ูุฑุดุญ ุฃู ูุงุฆุจ ุญุงูู
6. ูุชู ุฅูุดุงุก ุงูููู ุชููุงุฆูุงู
```

---

## ุงูุชูุตูุงุช ููุชุทููุฑ ุงููุณุชูุจูู

### 1. ุงุณุชุฎุฏุงู ุฌุฏุงูู ูููุตูุฉ ููุฅูุฌุงุฒุงุช ูุงูููุงุณุจุงุช:
ุญุงููุงู ูุณุชุฎุฏู ุญููู `achievements` ู `events` ููุต ุทููู.

**ุงูุฃูุถู:**
- ุงุณุชุฎุฏุงู ุฌุฏูู `deputy_achievements` ููู ุฅูุฌุงุฒ
- ุงุณุชุฎุฏุงู ุฌุฏูู `deputy_events` ููู ููุงุณุจุฉ
- ูุณูุญ ุจุฅุถุงูุฉ ุตูุฑ ููู ุฅูุฌุงุฒ/ููุงุณุจุฉ
- ูุณูุญ ุจุงูููุชุฑุฉ ูุงูุจุญุซ ุจุดูู ุฃูุถู

### 2. ุฅุถุงูุฉ ุญุงูุงุช ุฃูุซุฑ ูููุงุฆุจ:
```typescript
deputy_status: 
  | 'candidate'      // ูุฑุดุญ
  | 'active'         // ูุงุฆุจ ุญุงูู
  | 'inactive'       // ูุงุฆุจ ุณุงุจู
  | 'suspended'      // ููููู
```

### 3. ุฅุถุงูุฉ ูุธุงู ุงูุฃุฏูุงุฑ ุงููุชุนุฏุฏุฉ:
ุงููุณุชุฎุฏู ูููู ุฃู ูููู ูุงุฆุจ **ู** ูุฏูุฑ ูู ููุณ ุงูููุช:
```typescript
user_roles: [
  { user_id, role: 'deputy' },
  { user_id, role: 'admin' }
]
```

---

## ุงูุฎูุงุตุฉ

### ุงูุจููุฉ ุงูุญุงููุฉ ูุงุถุญุฉ ููุญุฏุฏุฉ:

โ **ุงูููุงุทู:**
- ุจูุงูุงุช ุฃุณุงุณูุฉ ููุท ูู `user_profiles`
- ูุง ููุฌุฏ ุฏูุฑ ุฎุงุต ูู `user_roles`

โ **ุงููุงุฆุจ:**
- ุจูุงูุงุช ุฃุณุงุณูุฉ ูู `user_profiles`
- ุฏูุฑ "deputy" ูู `user_roles`
- ุจูุงูุงุช ุฅุถุงููุฉ ุดุงููุฉ ูู `deputy_profiles`:
  - ุงูุฑูุฒ ูุงูุฑูู ุงูุงูุชุฎุงุจู
  - ุงูุจุฑูุงูุฌ ุงูุงูุชุฎุงุจู
  - ุงูุฅูุฌุงุฒุงุช ูุงูููุงุณุจุงุช
  - ุงููุฌูุณ ูุงูุญุงูุฉ
  - ูุนูููุงุช ุงูููุชุจ

โ **ุงููุฏูุฑ:**
- ุจูุงูุงุช ุฃุณุงุณูุฉ ูู `user_profiles`
- ุฏูุฑ "admin" ูู `user_roles`
- ุตูุงุญูุงุช ูุงููุฉ

### ุนูููุฉ ุงูุชุฑููุฉ ูุงุถุญุฉ:
1. ุฅุถุงูุฉ ุฏูุฑ ูู `user_roles`
2. ุฅูุดุงุก ููู ูู `deputy_profiles` (ูููุงุฆุจ ููุท)
3. ุฌููุน ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ ูุชุงุญุฉ ููุชุนุฏูู

---

**ุชุงุฑูุฎ ุงูุชูุซูู:** 20 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** ููุซู ุจุงููุงูู โ

